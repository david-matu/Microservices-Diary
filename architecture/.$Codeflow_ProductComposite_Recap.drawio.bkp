<mxfile host="Electron" agent="Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) draw.io/24.7.17 Chrome/128.0.6613.36 Electron/32.0.1 Safari/537.36" version="24.7.17">
  <diagram id="prtHgNgQTEPvFCAcTncT" name="Page-1">
    <mxGraphModel dx="1723" dy="1357" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="827" pageHeight="1169" math="0" shadow="0">
      <root>
        <mxCell id="0" />
        <mxCell id="1" parent="0" />
        <mxCell id="ASkFnVq22RRDwnPk15t2-1" value="&lt;div style=&quot;background-color:#ffffff;padding:0px 0px 0px 2px;&quot;&gt;&lt;div style=&quot;font-family: Monospace; font-size: 10pt; white-space: pre;&quot;&gt;&lt;p style=&quot;margin:0;&quot;&gt;&lt;span style=&quot;color:#7f0055;font-weight:bold;&quot;&gt;package&lt;/span&gt; com.david.microservices.alpha.api.composite.product;&lt;/p&gt;&lt;p style=&quot;margin:0;&quot;&gt;&lt;br&gt;&lt;/p&gt;&lt;p style=&quot;margin:0;&quot;&gt;&lt;span style=&quot;color:#7f0055;font-weight:bold;&quot;&gt;import&lt;/span&gt; org.springframework.web.bind.annotation.DeleteMapping;&lt;/p&gt;&lt;p style=&quot;margin:0;&quot;&gt;&lt;span style=&quot;color:#7f0055;font-weight:bold;&quot;&gt;import&lt;/span&gt; org.springframework.web.bind.annotation.GetMapping;&lt;/p&gt;&lt;p style=&quot;margin:0;&quot;&gt;&lt;span style=&quot;color:#7f0055;font-weight:bold;&quot;&gt;import&lt;/span&gt; org.springframework.web.bind.annotation.PathVariable;&lt;/p&gt;&lt;p style=&quot;margin:0;&quot;&gt;&lt;span style=&quot;color:#7f0055;font-weight:bold;&quot;&gt;import&lt;/span&gt; org.springframework.web.bind.annotation.PostMapping;&lt;/p&gt;&lt;p style=&quot;margin:0;&quot;&gt;&lt;span style=&quot;color:#7f0055;font-weight:bold;&quot;&gt;import&lt;/span&gt; org.springframework.web.bind.annotation.RequestBody;&lt;/p&gt;&lt;p style=&quot;margin:0;&quot;&gt;&lt;br&gt;&lt;/p&gt;&lt;p style=&quot;margin:0;&quot;&gt;&lt;span style=&quot;color:#7f0055;font-weight:bold;&quot;&gt;import&lt;/span&gt; io.swagger.v3.oas.annotations.Operation;&lt;/p&gt;&lt;p style=&quot;margin:0;&quot;&gt;&lt;span style=&quot;color:#7f0055;font-weight:bold;&quot;&gt;import&lt;/span&gt; io.swagger.v3.oas.annotations.responses.ApiResponse;&lt;/p&gt;&lt;p style=&quot;margin:0;&quot;&gt;&lt;span style=&quot;color:#7f0055;font-weight:bold;&quot;&gt;import&lt;/span&gt; io.swagger.v3.oas.annotations.responses.ApiResponses;&lt;/p&gt;&lt;p style=&quot;margin:0;&quot;&gt;&lt;br&gt;&lt;/p&gt;&lt;p style=&quot;margin:0;&quot;&gt;&lt;span style=&quot;color:#7f0055;font-weight:bold;&quot;&gt;public&lt;/span&gt; &lt;span style=&quot;color:#7f0055;font-weight:bold;&quot;&gt;interface&lt;/span&gt; ProductCompositeService {&lt;/p&gt;&lt;p style=&quot;margin:0;&quot;&gt;&#x9;&lt;/p&gt;&lt;p style=&quot;margin:0;&quot;&gt;&#x9;&lt;span style=&quot;color:#3f5fbf;&quot;&gt;/**&lt;/span&gt;&lt;/p&gt;&lt;p style=&quot;margin:0;&quot;&gt;&lt;span style=&quot;color:#3f5fbf;&quot;&gt;&#x9; * Sample usage: &quot;curl $HOST:$PORT/product&lt;/span&gt;&lt;span style=&quot;color:#7f7f9f;&quot;&gt;-&lt;/span&gt;&lt;span style=&quot;color:#3f5fbf;&quot;&gt;composite/1&quot;&lt;/span&gt;&lt;/p&gt;&lt;p style=&quot;margin:0;&quot;&gt;&lt;span style=&quot;color:#3f5fbf;&quot;&gt;&#x9; * &lt;/span&gt;&lt;/p&gt;&lt;p style=&quot;margin:0;&quot;&gt;&lt;span style=&quot;color:#3f5fbf;&quot;&gt;&#x9; * &lt;/span&gt;&lt;span style=&quot;color:#7f9fbf;font-weight:bold;&quot;&gt;@param&lt;/span&gt;&lt;span style=&quot;color:#3f5fbf;&quot;&gt; productId &lt;/span&gt;&lt;span style=&quot;color:#7f7f9f;&quot;&gt;-&lt;/span&gt;&lt;span style=&quot;color:#3f5fbf;&quot;&gt; id of the product&lt;/span&gt;&lt;/p&gt;&lt;p style=&quot;margin:0;&quot;&gt;&lt;span style=&quot;color:#3f5fbf;&quot;&gt;&#x9; * &lt;/span&gt;&lt;span style=&quot;color:#7f9fbf;font-weight:bold;&quot;&gt;@return&lt;/span&gt;&lt;span style=&quot;color:#3f5fbf;&quot;&gt; the composite product info, if found, else null&lt;/span&gt;&lt;/p&gt;&lt;p style=&quot;margin:0;&quot;&gt;&lt;span style=&quot;color:#3f5fbf;&quot;&gt;&#x9; * &lt;/span&gt;&lt;/p&gt;&lt;p style=&quot;margin:0;&quot;&gt;&lt;span style=&quot;color:#3f5fbf;&quot;&gt;&#x9; */&lt;/span&gt;&lt;/p&gt;&lt;p style=&quot;margin:0;&quot;&gt;&#x9;&lt;/p&gt;&lt;p style=&quot;margin:0;&quot;&gt;&#x9;&lt;span style=&quot;color:#646464;&quot;&gt;@Operation&lt;/span&gt;(&lt;/p&gt;&lt;p style=&quot;margin:0;&quot;&gt;&#x9;&#x9;&#x9;summary = &lt;span style=&quot;color:#2a00ff;&quot;&gt;&quot;${api.product-composite.get-composite-product.description}&quot;&lt;/span&gt;,&lt;/p&gt;&lt;p style=&quot;margin:0;&quot;&gt;&#x9;&#x9;&#x9;description = &lt;span style=&quot;color:#2a00ff;&quot;&gt;&quot;${api.product-composite.get-composite-product.notes}&quot;&lt;/span&gt;)&lt;/p&gt;&lt;p style=&quot;margin:0;&quot;&gt;&#x9;&lt;span style=&quot;color:#646464;&quot;&gt;@ApiResponses&lt;/span&gt;(value = {&lt;/p&gt;&lt;p style=&quot;margin:0;&quot;&gt;&#x9;&#x9;&#x9;&lt;span style=&quot;color:#646464;&quot;&gt;@ApiResponse&lt;/span&gt;(responseCode = &lt;span style=&quot;color:#2a00ff;&quot;&gt;&quot;200&quot;&lt;/span&gt;, description = &lt;span style=&quot;color:#2a00ff;&quot;&gt;&quot;${api.responseCodes.ok.description}&quot;&lt;/span&gt;),&lt;/p&gt;&lt;p style=&quot;margin:0;&quot;&gt;&#x9;&#x9;&#x9;&lt;span style=&quot;color:#646464;&quot;&gt;@ApiResponse&lt;/span&gt;(responseCode = &lt;span style=&quot;color:#2a00ff;&quot;&gt;&quot;400&quot;&lt;/span&gt;, description = &lt;span style=&quot;color:#2a00ff;&quot;&gt;&quot;${api.responseCodes.badRequest.description}&quot;&lt;/span&gt;),&lt;/p&gt;&lt;p style=&quot;margin:0;&quot;&gt;&#x9;&#x9;&#x9;&lt;span style=&quot;color:#646464;&quot;&gt;@ApiResponse&lt;/span&gt;(responseCode = &lt;span style=&quot;color:#2a00ff;&quot;&gt;&quot;404&quot;&lt;/span&gt;, description = &lt;span style=&quot;color:#2a00ff;&quot;&gt;&quot;${api.responseCodes.notFound.description}&quot;&lt;/span&gt;),&lt;/p&gt;&lt;p style=&quot;margin:0;&quot;&gt;&#x9;&#x9;&#x9;&lt;span style=&quot;color:#646464;&quot;&gt;@ApiResponse&lt;/span&gt;(responseCode = &lt;span style=&quot;color:#2a00ff;&quot;&gt;&quot;422&quot;&lt;/span&gt;, description = &lt;span style=&quot;color:#2a00ff;&quot;&gt;&quot;${api.responseCodes.unprocessableEntity.description}&quot;&lt;/span&gt;)&lt;/p&gt;&lt;p style=&quot;margin:0;&quot;&gt;&#x9;})&lt;/p&gt;&lt;p style=&quot;margin:0;&quot;&gt;&#x9;&lt;span style=&quot;color:#646464;&quot;&gt;@GetMapping&lt;/span&gt;(value = &lt;span style=&quot;color:#2a00ff;&quot;&gt;&quot;/product-composite/{productId}&quot;&lt;/span&gt;, produces = &lt;span style=&quot;color:#2a00ff;&quot;&gt;&quot;application/json&quot;&lt;/span&gt;)&lt;/p&gt;&lt;p style=&quot;margin:0;&quot;&gt;&#x9;ProductAggregate getProduct(&lt;span style=&quot;color:#646464;&quot;&gt;@PathVariable&lt;/span&gt; &lt;span style=&quot;color:#7f0055;font-weight:bold;&quot;&gt;int&lt;/span&gt; &lt;span style=&quot;color:#6a3e3e;&quot;&gt;productId&lt;/span&gt;);&lt;/p&gt;&lt;p style=&quot;margin:0;&quot;&gt;&#x9;&lt;/p&gt;&lt;p style=&quot;margin:0;&quot;&gt;&#x9;&lt;span style=&quot;color:#646464;&quot;&gt;@Operation&lt;/span&gt;(summary = &lt;span style=&quot;color:#2a00ff;&quot;&gt;&quot;${api.product-composite.create-composite-product.description}&quot;&lt;/span&gt;, description = &lt;span style=&quot;color:#2a00ff;&quot;&gt;&quot;{api.product-composite.create-composite-product.notes}&quot;&lt;/span&gt;)&lt;/p&gt;&lt;p style=&quot;margin:0;&quot;&gt;&#x9;&lt;span style=&quot;color:#646464;&quot;&gt;@ApiResponses&lt;/span&gt;(value = {&lt;/p&gt;&lt;p style=&quot;margin:0;&quot;&gt;&#x9;&#x9;&#x9;&lt;span style=&quot;color:#646464;&quot;&gt;@ApiResponse&lt;/span&gt;(responseCode = &lt;span style=&quot;color:#2a00ff;&quot;&gt;&quot;400&quot;&lt;/span&gt;, description = &lt;span style=&quot;color:#2a00ff;&quot;&gt;&quot;${api.responseCodes.badRequest.description}&quot;&lt;/span&gt;),&lt;/p&gt;&lt;p style=&quot;margin:0;&quot;&gt;&#x9;&#x9;&#x9;&lt;span style=&quot;color:#646464;&quot;&gt;@ApiResponse&lt;/span&gt;(responseCode = &lt;span style=&quot;color:#2a00ff;&quot;&gt;&quot;422&quot;&lt;/span&gt;, description = &lt;span style=&quot;color:#2a00ff;&quot;&gt;&quot;${api.responseCodes.unprocessableEntity.description}&quot;&lt;/span&gt;)&lt;/p&gt;&lt;p style=&quot;margin:0;&quot;&gt;&#x9;})&lt;/p&gt;&lt;p style=&quot;margin:0;&quot;&gt;&#x9;&lt;span style=&quot;color:#646464;&quot;&gt;@PostMapping&lt;/span&gt;(value = &lt;span style=&quot;color:#2a00ff;&quot;&gt;&quot;/product-composite&quot;&lt;/span&gt;, consumes = &lt;span style=&quot;color:#2a00ff;&quot;&gt;&quot;application/json&quot;&lt;/span&gt;)&lt;/p&gt;&lt;p style=&quot;margin:0;&quot;&gt;&#x9;&lt;span style=&quot;color:#7f0055;font-weight:bold;&quot;&gt;void&lt;/span&gt; createProduct(&lt;span style=&quot;color:#646464;&quot;&gt;@RequestBody&lt;/span&gt; ProductAggregate &lt;span style=&quot;color:#6a3e3e;&quot;&gt;body&lt;/span&gt;);&lt;/p&gt;&lt;p style=&quot;margin:0;&quot;&gt;&#x9;&lt;/p&gt;&lt;p style=&quot;margin:0;&quot;&gt;&#x9;&lt;span style=&quot;color:#646464;&quot;&gt;@Operation&lt;/span&gt;(summary = &lt;span style=&quot;color:#2a00ff;&quot;&gt;&quot;${api.product-composite.delete-product-composite.description}&quot;&lt;/span&gt;, description = &lt;span style=&quot;color:#2a00ff;&quot;&gt;&quot;${api.product-composite.delete-product-composite.notes}&quot;&lt;/span&gt;)&lt;/p&gt;&lt;p style=&quot;margin:0;&quot;&gt;&#x9;&lt;span style=&quot;color:#646464;&quot;&gt;@DeleteMapping&lt;/span&gt;(value = &lt;span style=&quot;color:#2a00ff;&quot;&gt;&quot;/product-composite/{productId}&quot;&lt;/span&gt;)&lt;/p&gt;&lt;p style=&quot;margin:0;&quot;&gt;&#x9;&lt;span style=&quot;color:#7f0055;font-weight:bold;&quot;&gt;void&lt;/span&gt; deleteProduct(&lt;span style=&quot;color:#646464;&quot;&gt;@PathVariable&lt;/span&gt; &lt;span style=&quot;color:#7f0055;font-weight:bold;&quot;&gt;int&lt;/span&gt; &lt;span style=&quot;color:#6a3e3e;&quot;&gt;productId&lt;/span&gt;);&lt;/p&gt;&lt;p style=&quot;margin:0;&quot;&gt;}&lt;/p&gt;&lt;p style=&quot;margin:0;&quot;&gt;&lt;/p&gt;&lt;/div&gt;&lt;/div&gt;" style="text;html=1;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;" vertex="1" parent="1">
          <mxGeometry x="40" y="240" width="1340" height="750" as="geometry" />
        </mxCell>
        <mxCell id="ASkFnVq22RRDwnPk15t2-2" value="&lt;h1 style=&quot;margin-top: 0px;&quot;&gt;Integration Flow&amp;nbsp;&lt;/h1&gt;&lt;h1 style=&quot;margin-top: 0px;&quot;&gt;Recap&lt;/h1&gt;&lt;p&gt;A recap on the code flow, the implementation of the architecture&amp;nbsp;&lt;/p&gt;" style="text;html=1;whiteSpace=wrap;overflow=hidden;rounded=0;" vertex="1" parent="1">
          <mxGeometry x="40" y="30" width="360" height="110" as="geometry" />
        </mxCell>
        <mxCell id="ASkFnVq22RRDwnPk15t2-3" value="&lt;div style=&quot;background-color:#ffffff;padding:0px 0px 0px 2px;&quot;&gt;&lt;div style=&quot;font-family: Monospace; font-size: 10pt; white-space: pre;&quot;&gt;&lt;p style=&quot;margin:0;&quot;&gt;&lt;span style=&quot;color:#7f0055;font-weight:bold;&quot;&gt;package&lt;/span&gt; com.david.microservices.alpha.composite.product.services;&lt;/p&gt;&lt;p style=&quot;margin:0;&quot;&gt;&lt;br&gt;&lt;/p&gt;&lt;p style=&quot;margin:0;&quot;&gt;&lt;span style=&quot;color:#7f0055;font-weight:bold;&quot;&gt;import&lt;/span&gt; java.util.List;&lt;/p&gt;&lt;p style=&quot;margin:0;&quot;&gt;&lt;span style=&quot;color:#7f0055;font-weight:bold;&quot;&gt;import&lt;/span&gt; java.util.stream.Collectors;&lt;/p&gt;&lt;p style=&quot;margin:0;&quot;&gt;&lt;br&gt;&lt;/p&gt;&lt;p style=&quot;margin:0;&quot;&gt;&lt;span style=&quot;color:#7f0055;font-weight:bold;&quot;&gt;import&lt;/span&gt; org.slf4j.Logger;&lt;/p&gt;&lt;p style=&quot;margin:0;&quot;&gt;&lt;span style=&quot;color:#7f0055;font-weight:bold;&quot;&gt;import&lt;/span&gt; org.slf4j.LoggerFactory;&lt;/p&gt;&lt;p style=&quot;margin:0;&quot;&gt;&lt;span style=&quot;color:#7f0055;font-weight:bold;&quot;&gt;import&lt;/span&gt; org.springframework.beans.factory.annotation.Autowired;&lt;/p&gt;&lt;p style=&quot;margin:0;&quot;&gt;&lt;span style=&quot;color:#7f0055;font-weight:bold;&quot;&gt;import&lt;/span&gt; org.springframework.web.bind.annotation.RestController;&lt;/p&gt;&lt;p style=&quot;margin:0;&quot;&gt;&lt;br&gt;&lt;/p&gt;&lt;p style=&quot;margin:0;&quot;&gt;&lt;span style=&quot;color:#7f0055;font-weight:bold;&quot;&gt;import&lt;/span&gt; com.david.microservices.alpha.api.composite.product.ProductAggregate;&lt;/p&gt;&lt;p style=&quot;margin:0;&quot;&gt;&lt;span style=&quot;color:#7f0055;font-weight:bold;&quot;&gt;import&lt;/span&gt; com.david.microservices.alpha.api.composite.product.ProductCompositeService;&lt;/p&gt;&lt;p style=&quot;margin:0;&quot;&gt;&lt;span style=&quot;color:#7f0055;font-weight:bold;&quot;&gt;import&lt;/span&gt; com.david.microservices.alpha.api.composite.product.RecommendationSummary;&lt;/p&gt;&lt;p style=&quot;margin:0;&quot;&gt;&lt;span style=&quot;color:#7f0055;font-weight:bold;&quot;&gt;import&lt;/span&gt; com.david.microservices.alpha.api.composite.product.ReviewSummary;&lt;/p&gt;&lt;p style=&quot;margin:0;&quot;&gt;&lt;span style=&quot;color:#7f0055;font-weight:bold;&quot;&gt;import&lt;/span&gt; com.david.microservices.alpha.api.composite.product.ServiceAddresses;&lt;/p&gt;&lt;p style=&quot;margin:0;&quot;&gt;&lt;span style=&quot;color:#7f0055;font-weight:bold;&quot;&gt;import&lt;/span&gt; com.david.microservices.alpha.api.core.product.Product;&lt;/p&gt;&lt;p style=&quot;margin:0;&quot;&gt;&lt;span style=&quot;color:#7f0055;font-weight:bold;&quot;&gt;import&lt;/span&gt; com.david.microservices.alpha.api.core.recommendation.Recommendation;&lt;/p&gt;&lt;p style=&quot;margin:0;&quot;&gt;&lt;span style=&quot;color:#7f0055;font-weight:bold;&quot;&gt;import&lt;/span&gt; com.david.microservices.alpha.api.core.review.Review;&lt;/p&gt;&lt;p style=&quot;margin:0;&quot;&gt;&lt;span style=&quot;color:#7f0055;font-weight:bold;&quot;&gt;import&lt;/span&gt; com.david.microservices.alpha.api.exceptions.NotFoundException;&lt;/p&gt;&lt;p style=&quot;margin:0;&quot;&gt;&lt;span style=&quot;color:#7f0055;font-weight:bold;&quot;&gt;import&lt;/span&gt; com.david.microservices.alpha.util.http.ServiceUtil;&lt;/p&gt;&lt;p style=&quot;margin:0;&quot;&gt;&lt;br&gt;&lt;/p&gt;&lt;p style=&quot;margin:0;&quot;&gt;&lt;span style=&quot;color:#646464;&quot;&gt;@RestController&lt;/span&gt;&lt;/p&gt;&lt;p style=&quot;margin:0;&quot;&gt;&lt;span style=&quot;color:#7f0055;font-weight:bold;&quot;&gt;public&lt;/span&gt; &lt;span style=&quot;color:#7f0055;font-weight:bold;&quot;&gt;class&lt;/span&gt; ProductCompositeServiceImpl &lt;span style=&quot;color:#7f0055;font-weight:bold;&quot;&gt;implements&lt;/span&gt; ProductCompositeService {&lt;/p&gt;&lt;p style=&quot;margin:0;&quot;&gt;&#x9;&lt;/p&gt;&lt;p style=&quot;margin:0;&quot;&gt;&#x9;&lt;span style=&quot;color:#7f0055;font-weight:bold;&quot;&gt;private&lt;/span&gt; &lt;span style=&quot;color:#7f0055;font-weight:bold;&quot;&gt;final&lt;/span&gt; ServiceUtil &lt;span style=&quot;color:#0000c0;&quot;&gt;serviceUtil&lt;/span&gt;;&lt;/p&gt;&lt;p style=&quot;margin:0;&quot;&gt;&#x9;&lt;span style=&quot;color:#7f0055;font-weight:bold;&quot;&gt;private&lt;/span&gt; &lt;span style=&quot;color:#7f0055;font-weight:bold;&quot;&gt;final&lt;/span&gt; ProductCompositeIntegration &lt;span style=&quot;color:#0000c0;&quot;&gt;integration&lt;/span&gt;;&lt;/p&gt;&lt;p style=&quot;margin:0;&quot;&gt;&#x9;&lt;/p&gt;&lt;p style=&quot;margin:0;&quot;&gt;&#x9;&lt;span style=&quot;color:#7f0055;font-weight:bold;&quot;&gt;private&lt;/span&gt; &lt;span style=&quot;color:#7f0055;font-weight:bold;&quot;&gt;static&lt;/span&gt; &lt;span style=&quot;color:#7f0055;font-weight:bold;&quot;&gt;final&lt;/span&gt; Logger &lt;span style=&quot;color:#0000c0;font-style:italic;font-weight:bold;&quot;&gt;LOG&lt;/span&gt; = LoggerFactory.&lt;span style=&quot;font-style: italic;&quot;&gt;getLogger&lt;/span&gt;(ProductCompositeServiceImpl.&lt;span style=&quot;color:#7f0055;font-weight:bold;&quot;&gt;class&lt;/span&gt;);&lt;/p&gt;&lt;p style=&quot;margin:0;&quot;&gt;&#x9;&lt;/p&gt;&lt;p style=&quot;margin:0;&quot;&gt;&#x9;&lt;span style=&quot;color: rgb(100, 100, 100); text-decoration-line: underline; text-decoration-color: rgb(244, 200, 45); text-decoration-style: wavy;&quot;&gt;@Autowired&lt;/span&gt;&lt;/p&gt;&lt;p style=&quot;margin:0;&quot;&gt;&#x9;&lt;span style=&quot;color:#7f0055;font-weight:bold;&quot;&gt;public&lt;/span&gt; ProductCompositeServiceImpl(ServiceUtil &lt;span style=&quot;color:#6a3e3e;&quot;&gt;serviceUtil&lt;/span&gt;, ProductCompositeIntegration &lt;span style=&quot;color:#6a3e3e;&quot;&gt;integration&lt;/span&gt;) {&lt;/p&gt;&lt;p style=&quot;margin:0;&quot;&gt;&#x9;&#x9;&lt;span style=&quot;color:#7f0055;font-weight:bold;&quot;&gt;this&lt;/span&gt;.&lt;span style=&quot;color:#0000c0;&quot;&gt;serviceUtil&lt;/span&gt; = &lt;span style=&quot;color:#6a3e3e;&quot;&gt;serviceUtil&lt;/span&gt;;&lt;/p&gt;&lt;p style=&quot;margin:0;&quot;&gt;&#x9;&#x9;&lt;span style=&quot;color:#7f0055;font-weight:bold;&quot;&gt;this&lt;/span&gt;.&lt;span style=&quot;color:#0000c0;&quot;&gt;integration&lt;/span&gt; = &lt;span style=&quot;color:#6a3e3e;&quot;&gt;integration&lt;/span&gt;;&lt;/p&gt;&lt;p style=&quot;margin:0;&quot;&gt;&#x9;}&lt;/p&gt;&lt;p style=&quot;margin:0;&quot;&gt;&lt;br&gt;&lt;/p&gt;&lt;p style=&quot;margin:0;&quot;&gt;&#x9;&lt;span style=&quot;color:#646464;&quot;&gt;@Override&lt;/span&gt;&lt;/p&gt;&lt;p style=&quot;margin:0;&quot;&gt;&#x9;&lt;span style=&quot;color:#7f0055;font-weight:bold;&quot;&gt;public&lt;/span&gt; ProductAggregate getProduct(&lt;span style=&quot;color:#7f0055;font-weight:bold;&quot;&gt;int&lt;/span&gt; &lt;span style=&quot;color:#6a3e3e;&quot;&gt;productId&lt;/span&gt;) {&lt;/p&gt;&lt;p style=&quot;margin:0;&quot;&gt;&#x9;&#x9;Product &lt;span style=&quot;color:#6a3e3e;&quot;&gt;product&lt;/span&gt; = &lt;span style=&quot;color:#0000c0;&quot;&gt;integration&lt;/span&gt;.getProduct(&lt;span style=&quot;color:#6a3e3e;&quot;&gt;productId&lt;/span&gt;);&lt;/p&gt;&lt;p style=&quot;margin:0;&quot;&gt;&#x9;&#x9;&lt;/p&gt;&lt;p style=&quot;margin:0;&quot;&gt;&#x9;&#x9;&lt;span style=&quot;color:#7f0055;font-weight:bold;&quot;&gt;if&lt;/span&gt;(&lt;span style=&quot;color:#6a3e3e;&quot;&gt;product&lt;/span&gt; == &lt;span style=&quot;color:#7f0055;font-weight:bold;&quot;&gt;null&lt;/span&gt;) {&lt;/p&gt;&lt;p style=&quot;margin:0;&quot;&gt;&#x9;&#x9;&#x9;&lt;span style=&quot;color:#7f0055;font-weight:bold;&quot;&gt;throw&lt;/span&gt; &lt;span style=&quot;color:#7f0055;font-weight:bold;&quot;&gt;new&lt;/span&gt; NotFoundException(&lt;span style=&quot;color:#2a00ff;&quot;&gt;&quot;No product found for productId: &quot;&lt;/span&gt; + &lt;span style=&quot;color:#6a3e3e;&quot;&gt;productId&lt;/span&gt;);&lt;/p&gt;&lt;p style=&quot;margin:0;&quot;&gt;&#x9;&#x9;}&lt;/p&gt;&lt;p style=&quot;margin:0;&quot;&gt;&#x9;&#x9;&lt;/p&gt;&lt;p style=&quot;margin:0;&quot;&gt;&#x9;&#x9;List&amp;lt;Recommendation&amp;gt; &lt;span style=&quot;color:#6a3e3e;&quot;&gt;recommendations&lt;/span&gt; = &lt;span style=&quot;color:#0000c0;&quot;&gt;integration&lt;/span&gt;.getRecommendations(&lt;span style=&quot;color:#6a3e3e;&quot;&gt;productId&lt;/span&gt;);&lt;/p&gt;&lt;p style=&quot;margin:0;&quot;&gt;&#x9;&#x9;&lt;/p&gt;&lt;p style=&quot;margin:0;&quot;&gt;&#x9;&#x9;List&amp;lt;Review&amp;gt; &lt;span style=&quot;color:#6a3e3e;&quot;&gt;reviews&lt;/span&gt; = &lt;span style=&quot;color:#0000c0;&quot;&gt;integration&lt;/span&gt;.getReviews(&lt;span style=&quot;color:#6a3e3e;&quot;&gt;productId&lt;/span&gt;);&lt;/p&gt;&lt;p style=&quot;margin:0;&quot;&gt;&#x9;&#x9;&lt;/p&gt;&lt;p style=&quot;margin:0;&quot;&gt;&#x9;&#x9;&lt;span style=&quot;color:#7f0055;font-weight:bold;&quot;&gt;return&lt;/span&gt; createProductAggregate(&lt;span style=&quot;color:#6a3e3e;&quot;&gt;product&lt;/span&gt;, &lt;span style=&quot;color:#6a3e3e;&quot;&gt;recommendations&lt;/span&gt;, &lt;span style=&quot;color:#6a3e3e;&quot;&gt;reviews&lt;/span&gt;, &lt;span style=&quot;color:#0000c0;&quot;&gt;serviceUtil&lt;/span&gt;.getServiceAddress());&#x9;&#x9;&lt;/p&gt;&lt;p style=&quot;margin:0;&quot;&gt;&#x9;}&lt;/p&gt;&lt;p style=&quot;margin:0;&quot;&gt;&lt;br&gt;&lt;/p&gt;&lt;p style=&quot;margin:0;&quot;&gt;&#x9;&lt;span style=&quot;color:#7f0055;font-weight:bold;&quot;&gt;private&lt;/span&gt; ProductAggregate createProductAggregate(Product &lt;span style=&quot;color:#6a3e3e;&quot;&gt;product&lt;/span&gt;, List&amp;lt;Recommendation&amp;gt; &lt;span style=&quot;color:#6a3e3e;&quot;&gt;recommendations&lt;/span&gt;,&lt;/p&gt;&lt;p style=&quot;margin:0;&quot;&gt;&#x9;&#x9;&#x9;List&amp;lt;Review&amp;gt; &lt;span style=&quot;color:#6a3e3e;&quot;&gt;reviews&lt;/span&gt;, String &lt;span style=&quot;color:#6a3e3e;&quot;&gt;serviceAddress&lt;/span&gt;) {&lt;/p&gt;&lt;p style=&quot;margin:0;&quot;&gt;&#x9;&#x9;&lt;/p&gt;&lt;p style=&quot;margin:0;&quot;&gt;&#x9;&#x9;&lt;span style=&quot;color:#3f7f5f;&quot;&gt;// 1. Setup product info&lt;/span&gt;&lt;/p&gt;&lt;p style=&quot;margin:0;&quot;&gt;&#x9;&#x9;&lt;span style=&quot;color:#7f0055;font-weight:bold;&quot;&gt;int&lt;/span&gt; &lt;span style=&quot;color:#6a3e3e;&quot;&gt;productId&lt;/span&gt; = &lt;span style=&quot;color:#6a3e3e;&quot;&gt;product&lt;/span&gt;.getProductId();&lt;/p&gt;&lt;p style=&quot;margin:0;&quot;&gt;&#x9;&#x9;String &lt;span style=&quot;color:#6a3e3e;&quot;&gt;name&lt;/span&gt; = &lt;span style=&quot;color:#6a3e3e;&quot;&gt;product&lt;/span&gt;.getName();&lt;/p&gt;&lt;p style=&quot;margin:0;&quot;&gt;&#x9;&#x9;&lt;span style=&quot;color:#7f0055;font-weight:bold;&quot;&gt;int&lt;/span&gt; &lt;span style=&quot;color:#6a3e3e;&quot;&gt;weight&lt;/span&gt; = &lt;span style=&quot;color:#6a3e3e;&quot;&gt;product&lt;/span&gt;.getWeight();&lt;/p&gt;&lt;p style=&quot;margin:0;&quot;&gt;&#x9;&#x9;&lt;/p&gt;&lt;p style=&quot;margin:0;&quot;&gt;&#x9;&#x9;&lt;span style=&quot;color:#3f7f5f;&quot;&gt;// 2. Copy summary recommendation info if available&lt;/span&gt;&lt;/p&gt;&lt;p style=&quot;margin:0;&quot;&gt;&#x9;&#x9;List&amp;lt;RecommendationSummary&amp;gt; &lt;span style=&quot;color:#6a3e3e;&quot;&gt;recommendationSummaries&lt;/span&gt; = (&lt;span style=&quot;color:#6a3e3e;&quot;&gt;recommendations&lt;/span&gt; == &lt;span style=&quot;color:#7f0055;font-weight:bold;&quot;&gt;null&lt;/span&gt;) ? &lt;span style=&quot;color:#7f0055;font-weight:bold;&quot;&gt;null&lt;/span&gt; : &lt;span style=&quot;color:#6a3e3e;&quot;&gt;recommendations&lt;/span&gt;.stream()&lt;/p&gt;&lt;p style=&quot;margin:0;&quot;&gt;&#x9;&#x9;&#x9;&#x9;.map(&lt;span style=&quot;color:#6a3e3e;&quot;&gt;r&lt;/span&gt; -&amp;gt; &lt;span style=&quot;color:#7f0055;font-weight:bold;&quot;&gt;new&lt;/span&gt; RecommendationSummary(&lt;span style=&quot;color:#6a3e3e;&quot;&gt;r&lt;/span&gt;.getRecommendationId(), &lt;span style=&quot;color:#6a3e3e;&quot;&gt;r&lt;/span&gt;.getAuthor(), &lt;span style=&quot;color:#6a3e3e;&quot;&gt;r&lt;/span&gt;.getRate(), &lt;span style=&quot;color:#6a3e3e;&quot;&gt;r&lt;/span&gt;.getContent()))&lt;/p&gt;&lt;p style=&quot;margin:0;&quot;&gt;&#x9;&#x9;&#x9;&#x9;.collect(Collectors.&lt;span style=&quot;font-style: italic;&quot;&gt;toList&lt;/span&gt;());&lt;/p&gt;&lt;p style=&quot;margin:0;&quot;&gt;&#x9;&#x9;&lt;/p&gt;&lt;p style=&quot;margin:0;&quot;&gt;&#x9;&#x9;&lt;span style=&quot;color:#3f7f5f;&quot;&gt;// 3. Copy summary review info if available&lt;/span&gt;&lt;/p&gt;&lt;p style=&quot;margin:0;&quot;&gt;&#x9;&#x9;List&amp;lt;ReviewSummary&amp;gt; &lt;span style=&quot;color:#6a3e3e;&quot;&gt;reviewSummaries&lt;/span&gt; = (&lt;span style=&quot;color:#6a3e3e;&quot;&gt;reviews&lt;/span&gt; == &lt;span style=&quot;color:#7f0055;font-weight:bold;&quot;&gt;null&lt;/span&gt;) ? &lt;span style=&quot;color:#7f0055;font-weight:bold;&quot;&gt;null&lt;/span&gt; : &lt;span style=&quot;color:#6a3e3e;&quot;&gt;reviews&lt;/span&gt;.stream()&lt;/p&gt;&lt;p style=&quot;margin:0;&quot;&gt;&#x9;&#x9;&#x9;&#x9;.map(&lt;span style=&quot;color:#6a3e3e;&quot;&gt;r&lt;/span&gt; -&amp;gt; &lt;span style=&quot;color:#7f0055;font-weight:bold;&quot;&gt;new&lt;/span&gt; ReviewSummary(&lt;span style=&quot;color:#6a3e3e;&quot;&gt;r&lt;/span&gt;.getReviewId(), &lt;span style=&quot;color:#6a3e3e;&quot;&gt;r&lt;/span&gt;.getAuthor(), &lt;span style=&quot;color:#6a3e3e;&quot;&gt;r&lt;/span&gt;.getSubject()))&lt;/p&gt;&lt;p style=&quot;margin:0;&quot;&gt;&#x9;&#x9;&#x9;&#x9;.collect(Collectors.&lt;span style=&quot;font-style: italic;&quot;&gt;toList&lt;/span&gt;());&lt;/p&gt;&lt;p style=&quot;margin:0;&quot;&gt;&#x9;&#x9;&lt;/p&gt;&lt;p style=&quot;margin:0;&quot;&gt;&#x9;&#x9;&lt;span style=&quot;color:#3f7f5f;&quot;&gt;// 4. Create info regarding the involved &lt;/span&gt;&lt;span style=&quot;color: rgb(63, 127, 95); text-decoration-line: underline; text-decoration-color: rgb(255, 128, 64); text-decoration-style: wavy;&quot;&gt;microservices&lt;/span&gt;&lt;span style=&quot;color:#3f7f5f;&quot;&gt; addresses&lt;/span&gt;&lt;/p&gt;&lt;p style=&quot;margin:0;&quot;&gt;&#x9;&#x9;String &lt;span style=&quot;color:#6a3e3e;&quot;&gt;productAddress&lt;/span&gt; = &lt;span style=&quot;color:#6a3e3e;&quot;&gt;product&lt;/span&gt;.getServiceAddress();&lt;/p&gt;&lt;p style=&quot;margin:0;&quot;&gt;&#x9;&#x9;String &lt;span style=&quot;color:#6a3e3e;&quot;&gt;reviewAddress&lt;/span&gt; = (&lt;span style=&quot;color:#6a3e3e;&quot;&gt;reviews&lt;/span&gt; != &lt;span style=&quot;color:#7f0055;font-weight:bold;&quot;&gt;null&lt;/span&gt; &amp;amp;&amp;amp; &lt;span style=&quot;color:#6a3e3e;&quot;&gt;reviews&lt;/span&gt;.size() &amp;gt; 0) ? &lt;span style=&quot;color:#6a3e3e;&quot;&gt;reviews&lt;/span&gt;.get(0).getServiceAddress() : &lt;span style=&quot;color:#2a00ff;&quot;&gt;&quot;&quot;&lt;/span&gt;;&lt;/p&gt;&lt;p style=&quot;margin:0;&quot;&gt;&#x9;&#x9;String &lt;span style=&quot;color:#6a3e3e;&quot;&gt;recommendationAddress&lt;/span&gt; = (&lt;span style=&quot;color:#6a3e3e;&quot;&gt;recommendations&lt;/span&gt; != &lt;span style=&quot;color:#7f0055;font-weight:bold;&quot;&gt;null&lt;/span&gt; &amp;amp;&amp;amp; &lt;span style=&quot;color:#6a3e3e;&quot;&gt;recommendations&lt;/span&gt;.size() &amp;gt; 0) ? &lt;span style=&quot;color:#6a3e3e;&quot;&gt;recommendations&lt;/span&gt;.get(0).getServiceAddress() : &lt;span style=&quot;color:#2a00ff;&quot;&gt;&quot;&quot;&lt;/span&gt;;&lt;/p&gt;&lt;p style=&quot;margin:0;&quot;&gt;&#x9;&#x9;ServiceAddresses &lt;span style=&quot;color:#6a3e3e;&quot;&gt;serviceAddresses&lt;/span&gt; = &lt;span style=&quot;color:#7f0055;font-weight:bold;&quot;&gt;new&lt;/span&gt; ServiceAddresses(&lt;span style=&quot;color:#6a3e3e;&quot;&gt;serviceAddress&lt;/span&gt;, &lt;span style=&quot;color:#6a3e3e;&quot;&gt;productAddress&lt;/span&gt;, &lt;span style=&quot;color:#6a3e3e;&quot;&gt;reviewAddress&lt;/span&gt;, &lt;span style=&quot;color:#6a3e3e;&quot;&gt;recommendationAddress&lt;/span&gt;);&lt;/p&gt;&lt;p style=&quot;margin:0;&quot;&gt;&#x9;&#x9;&lt;/p&gt;&lt;p style=&quot;margin:0;&quot;&gt;&#x9;&#x9;&lt;span style=&quot;color:#7f0055;font-weight:bold;&quot;&gt;return&lt;/span&gt; &lt;span style=&quot;color:#7f0055;font-weight:bold;&quot;&gt;new&lt;/span&gt; ProductAggregate(&lt;span style=&quot;color:#6a3e3e;&quot;&gt;productId&lt;/span&gt;, &lt;span style=&quot;color:#6a3e3e;&quot;&gt;name&lt;/span&gt;, &lt;span style=&quot;color:#6a3e3e;&quot;&gt;weight&lt;/span&gt;, &lt;span style=&quot;color:#6a3e3e;&quot;&gt;recommendationSummaries&lt;/span&gt;, &lt;span style=&quot;color:#6a3e3e;&quot;&gt;reviewSummaries&lt;/span&gt;, &lt;span style=&quot;color:#6a3e3e;&quot;&gt;serviceAddresses&lt;/span&gt;);&lt;/p&gt;&lt;p style=&quot;margin:0;&quot;&gt;&#x9;}&lt;/p&gt;&lt;p style=&quot;margin:0;&quot;&gt;&lt;br&gt;&lt;/p&gt;&lt;p style=&quot;margin:0;&quot;&gt;&#x9;&lt;span style=&quot;color:#646464;&quot;&gt;@Override&lt;/span&gt;&lt;/p&gt;&lt;p style=&quot;margin:0;&quot;&gt;&#x9;&lt;span style=&quot;color:#7f0055;font-weight:bold;&quot;&gt;public&lt;/span&gt; &lt;span style=&quot;color:#7f0055;font-weight:bold;&quot;&gt;void&lt;/span&gt; createProduct(ProductAggregate &lt;span style=&quot;color:#6a3e3e;&quot;&gt;body&lt;/span&gt;) {&lt;/p&gt;&lt;p style=&quot;margin:0;&quot;&gt;&#x9;&#x9;&lt;/p&gt;&lt;p style=&quot;margin:0;&quot;&gt;&#x9;&#x9;&lt;span style=&quot;color:#7f0055;font-weight:bold;&quot;&gt;try&lt;/span&gt; {&lt;/p&gt;&lt;p style=&quot;margin:0;&quot;&gt;&#x9;&#x9;&#x9;&lt;span style=&quot;color:#0000c0;font-style:italic;font-weight:bold;&quot;&gt;LOG&lt;/span&gt;.debug(&lt;span style=&quot;color:#2a00ff;&quot;&gt;&quot;createCompositeProduct: creates a new composite entity for productId: {}&quot;&lt;/span&gt;, &lt;span style=&quot;color:#6a3e3e;&quot;&gt;body&lt;/span&gt;.getProductId());&lt;/p&gt;&lt;p style=&quot;margin:0;&quot;&gt;&#x9;&#x9;&#x9;&lt;/p&gt;&lt;p style=&quot;margin:0;&quot;&gt;&#x9;&#x9;&#x9;Product &lt;span style=&quot;color:#6a3e3e;&quot;&gt;product&lt;/span&gt; = &lt;span style=&quot;color:#7f0055;font-weight:bold;&quot;&gt;new&lt;/span&gt; Product(&lt;span style=&quot;color:#6a3e3e;&quot;&gt;body&lt;/span&gt;.getProductId(), &lt;span style=&quot;color:#6a3e3e;&quot;&gt;body&lt;/span&gt;.getName(), &lt;span style=&quot;color:#6a3e3e;&quot;&gt;body&lt;/span&gt;.getWeight(), &lt;span style=&quot;color:#7f0055;font-weight:bold;&quot;&gt;null&lt;/span&gt;);&lt;/p&gt;&lt;p style=&quot;margin:0;&quot;&gt;&#x9;&#x9;&#x9;&lt;span style=&quot;color:#0000c0;&quot;&gt;integration&lt;/span&gt;.createProduct(&lt;span style=&quot;color:#6a3e3e;&quot;&gt;product&lt;/span&gt;);&lt;/p&gt;&lt;p style=&quot;margin:0;&quot;&gt;&#x9;&#x9;&#x9;&lt;/p&gt;&lt;p style=&quot;margin:0;&quot;&gt;&#x9;&#x9;&#x9;&lt;span style=&quot;color:#7f0055;font-weight:bold;&quot;&gt;if&lt;/span&gt;(&lt;span style=&quot;color:#6a3e3e;&quot;&gt;body&lt;/span&gt;.getRecommendations() != &lt;span style=&quot;color:#7f0055;font-weight:bold;&quot;&gt;null&lt;/span&gt;) {&lt;/p&gt;&lt;p style=&quot;margin:0;&quot;&gt;&#x9;&#x9;&#x9;&#x9;&lt;span style=&quot;color:#6a3e3e;&quot;&gt;body&lt;/span&gt;.getRecommendations().forEach(&lt;span style=&quot;color:#6a3e3e;&quot;&gt;r&lt;/span&gt; -&amp;gt; {&lt;/p&gt;&lt;p style=&quot;margin:0;&quot;&gt;&#x9;&#x9;&#x9;&#x9;&#x9;Recommendation &lt;span style=&quot;color:#6a3e3e;&quot;&gt;rec&lt;/span&gt; = &lt;span style=&quot;color:#7f0055;font-weight:bold;&quot;&gt;new&lt;/span&gt; Recommendation(&lt;span style=&quot;color:#6a3e3e;&quot;&gt;body&lt;/span&gt;.getProductId(), &lt;span style=&quot;color:#6a3e3e;&quot;&gt;r&lt;/span&gt;.getRecommendationId(), &lt;span style=&quot;color:#6a3e3e;&quot;&gt;r&lt;/span&gt;.getAuthor(), &lt;span style=&quot;color:#6a3e3e;&quot;&gt;r&lt;/span&gt;.getRate(), &lt;span style=&quot;color:#6a3e3e;&quot;&gt;r&lt;/span&gt;.getContent(), &lt;span style=&quot;color:#7f0055;font-weight:bold;&quot;&gt;null&lt;/span&gt;);&lt;/p&gt;&lt;p style=&quot;margin:0;&quot;&gt;&#x9;&#x9;&#x9;&#x9;&#x9;&lt;span style=&quot;color:#0000c0;&quot;&gt;integration&lt;/span&gt;.createRecommendation(&lt;span style=&quot;color:#6a3e3e;&quot;&gt;rec&lt;/span&gt;); &lt;span style=&quot;color:#3f7f5f;&quot;&gt;//implement this in the ProductCompositeIntegration&lt;/span&gt;&lt;/p&gt;&lt;p style=&quot;margin:0;&quot;&gt;&#x9;&#x9;&#x9;&#x9;});&lt;/p&gt;&lt;p style=&quot;margin:0;&quot;&gt;&#x9;&#x9;&#x9;}&lt;/p&gt;&lt;p style=&quot;margin:0;&quot;&gt;&#x9;&#x9;&#x9;&lt;/p&gt;&lt;p style=&quot;margin:0;&quot;&gt;&#x9;&#x9;&#x9;&lt;span style=&quot;color:#7f0055;font-weight:bold;&quot;&gt;if&lt;/span&gt;(&lt;span style=&quot;color:#6a3e3e;&quot;&gt;body&lt;/span&gt;.getReviews() != &lt;span style=&quot;color:#7f0055;font-weight:bold;&quot;&gt;null&lt;/span&gt;) {&lt;/p&gt;&lt;p style=&quot;margin:0;&quot;&gt;&#x9;&#x9;&#x9;&#x9;&lt;span style=&quot;color:#6a3e3e;&quot;&gt;body&lt;/span&gt;.getReviews().forEach(&lt;span style=&quot;color:#6a3e3e;&quot;&gt;r&lt;/span&gt; -&amp;gt; {&lt;/p&gt;&lt;p style=&quot;margin:0;&quot;&gt;&#x9;&#x9;&#x9;&#x9;&#x9;Review &lt;span style=&quot;color:#6a3e3e;&quot;&gt;rev&lt;/span&gt; = &lt;span style=&quot;color:#7f0055;font-weight:bold;&quot;&gt;new&lt;/span&gt; Review(&lt;span style=&quot;color:#6a3e3e;&quot;&gt;body&lt;/span&gt;.getProductId(), &lt;span style=&quot;color:#6a3e3e;&quot;&gt;r&lt;/span&gt;.getReviewId(), &lt;span style=&quot;color:#6a3e3e;&quot;&gt;r&lt;/span&gt;.getAuthor(), &lt;span style=&quot;color:#6a3e3e;&quot;&gt;r&lt;/span&gt;.getSubject(), &lt;span style=&quot;color:#6a3e3e;&quot;&gt;r&lt;/span&gt;.getContent(), &lt;span style=&quot;color:#7f0055;font-weight:bold;&quot;&gt;null&lt;/span&gt;);&lt;/p&gt;&lt;p style=&quot;margin:0;&quot;&gt;&#x9;&#x9;&#x9;&#x9;&#x9;&lt;span style=&quot;color:#0000c0;&quot;&gt;integration&lt;/span&gt;.createReview(&lt;span style=&quot;color:#6a3e3e;&quot;&gt;rev&lt;/span&gt;);&lt;/p&gt;&lt;p style=&quot;margin:0;&quot;&gt;&#x9;&#x9;&#x9;&#x9;});&lt;/p&gt;&lt;p style=&quot;margin:0;&quot;&gt;&#x9;&#x9;&#x9;}&lt;/p&gt;&lt;p style=&quot;margin:0;&quot;&gt;&#x9;&#x9;&#x9;&lt;/p&gt;&lt;p style=&quot;margin:0;&quot;&gt;&#x9;&#x9;} &lt;span style=&quot;color:#7f0055;font-weight:bold;&quot;&gt;catch&lt;/span&gt; (RuntimeException &lt;span style=&quot;color:#6a3e3e;&quot;&gt;rex&lt;/span&gt;) {&lt;/p&gt;&lt;p style=&quot;margin:0;&quot;&gt;&#x9;&#x9;&#x9;&lt;span style=&quot;color:#0000c0;font-style:italic;font-weight:bold;&quot;&gt;LOG&lt;/span&gt;.warn(&lt;span style=&quot;color:#2a00ff;&quot;&gt;&quot;createCompositeProduct failed&quot;&lt;/span&gt;, &lt;span style=&quot;color:#6a3e3e;&quot;&gt;rex&lt;/span&gt;);&lt;/p&gt;&lt;p style=&quot;margin:0;&quot;&gt;&#x9;&#x9;}&lt;/p&gt;&lt;p style=&quot;margin:0;&quot;&gt;&#x9;}&lt;/p&gt;&lt;p style=&quot;margin:0;&quot;&gt;&lt;br&gt;&lt;/p&gt;&lt;p style=&quot;margin:0;&quot;&gt;&#x9;&lt;span style=&quot;color:#646464;&quot;&gt;@Override&lt;/span&gt;&lt;/p&gt;&lt;p style=&quot;margin:0;&quot;&gt;&#x9;&lt;span style=&quot;color:#7f0055;font-weight:bold;&quot;&gt;public&lt;/span&gt; &lt;span style=&quot;color:#7f0055;font-weight:bold;&quot;&gt;void&lt;/span&gt; deleteProduct(&lt;span style=&quot;color:#7f0055;font-weight:bold;&quot;&gt;int&lt;/span&gt; &lt;span style=&quot;color:#6a3e3e;&quot;&gt;productId&lt;/span&gt;) {&lt;/p&gt;&lt;p style=&quot;margin:0;&quot;&gt;&#x9;&#x9;&lt;span style=&quot;color:#0000c0;font-style:italic;font-weight:bold;&quot;&gt;LOG&lt;/span&gt;.debug(&lt;span style=&quot;color:#2a00ff;&quot;&gt;&quot;deleteCompositeProduct: Deletes a product aggregate for productId: {}&quot;&lt;/span&gt;, &lt;span style=&quot;color:#6a3e3e;&quot;&gt;productId&lt;/span&gt;);&lt;/p&gt;&lt;p style=&quot;margin:0;&quot;&gt;&#x9;&#x9;&lt;/p&gt;&lt;p style=&quot;margin:0;&quot;&gt;&#x9;&#x9;&lt;span style=&quot;color:#0000c0;&quot;&gt;integration&lt;/span&gt;.deleteProduct(&lt;span style=&quot;color:#6a3e3e;&quot;&gt;productId&lt;/span&gt;);&lt;/p&gt;&lt;p style=&quot;margin:0;&quot;&gt;&#x9;&#x9;&lt;span style=&quot;color:#0000c0;&quot;&gt;integration&lt;/span&gt;.deleteRecommendations(&lt;span style=&quot;color:#6a3e3e;&quot;&gt;productId&lt;/span&gt;);&lt;/p&gt;&lt;p style=&quot;margin:0;&quot;&gt;&#x9;&#x9;&lt;span style=&quot;color:#0000c0;&quot;&gt;integration&lt;/span&gt;.deleteReviews(&lt;span style=&quot;color:#6a3e3e;&quot;&gt;productId&lt;/span&gt;);&lt;/p&gt;&lt;p style=&quot;margin:0;&quot;&gt;&#x9;&#x9;&lt;/p&gt;&lt;p style=&quot;margin:0;&quot;&gt;&#x9;&#x9;&lt;span style=&quot;color:#0000c0;font-style:italic;font-weight:bold;&quot;&gt;LOG&lt;/span&gt;.debug(&lt;span style=&quot;color:#2a00ff;&quot;&gt;&quot;deleteCompositeProduct: aggregate entities deleted for productId: {}&quot;&lt;/span&gt;, &lt;span style=&quot;color:#6a3e3e;&quot;&gt;productId&lt;/span&gt;);&lt;/p&gt;&lt;p style=&quot;margin:0;&quot;&gt;&#x9;}&lt;/p&gt;&lt;p style=&quot;margin:0;&quot;&gt;&lt;br&gt;&lt;/p&gt;&lt;p style=&quot;margin:0;&quot;&gt;}&lt;/p&gt;&lt;p style=&quot;margin:0;&quot;&gt;&lt;/p&gt;&lt;/div&gt;&lt;/div&gt;" style="text;html=1;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;textShadow=1;" vertex="1" parent="1">
          <mxGeometry x="40" y="1180" width="1420" height="1879" as="geometry" />
        </mxCell>
        <mxCell id="ASkFnVq22RRDwnPk15t2-4" value="&amp;lt;&amp;lt;interface&amp;gt;&amp;gt; &lt;b&gt;&lt;font style=&quot;font-size: 13px;&quot;&gt;ProductCompositeService&lt;/font&gt;&lt;/b&gt;&amp;nbsp; in &lt;b&gt;api&lt;/b&gt; libary" style="text;html=1;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;fillColor=#dae8fc;strokeColor=#6c8ebf;gradientColor=#7ea6e0;" vertex="1" parent="1">
          <mxGeometry x="40" y="200" width="330" height="30" as="geometry" />
        </mxCell>
        <mxCell id="ASkFnVq22RRDwnPk15t2-5" value="[[implementation]]&amp;nbsp;&lt;b&gt;&lt;font style=&quot;font-size: 13px;&quot;&gt;ProductCompositeServiceImpl&lt;/font&gt;&lt;/b&gt;&amp;nbsp; in &lt;b&gt;product-composite &lt;/b&gt;microservice" style="text;html=1;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;fillColor=#dae8fc;strokeColor=#6c8ebf;gradientColor=#7ea6e0;" vertex="1" parent="1">
          <mxGeometry x="40" y="1120" width="550" height="30" as="geometry" />
        </mxCell>
        <mxCell id="ASkFnVq22RRDwnPk15t2-6" value="&lt;div style=&quot;background-color:#ffffff;padding:0px 0px 0px 2px;&quot;&gt;&lt;div style=&quot;font-family: Monospace; font-size: 10pt; white-space: pre;&quot;&gt;&lt;p style=&quot;margin:0;&quot;&gt;&lt;span style=&quot;color:#7f0055;font-weight:bold;&quot;&gt;package&lt;/span&gt; com.david.microservices.alpha.api.composite.product;&lt;/p&gt;&lt;p style=&quot;margin:0;&quot;&gt;&lt;br&gt;&lt;/p&gt;&lt;p style=&quot;margin:0;&quot;&gt;&lt;span style=&quot;color:#7f0055;font-weight:bold;&quot;&gt;import&lt;/span&gt; java.util.List;&lt;/p&gt;&lt;p style=&quot;margin:0;&quot;&gt;&lt;br&gt;&lt;/p&gt;&lt;p style=&quot;margin:0;&quot;&gt;&lt;span style=&quot;color:#7f0055;font-weight:bold;&quot;&gt;public&lt;/span&gt; &lt;span style=&quot;color:#7f0055;font-weight:bold;&quot;&gt;class&lt;/span&gt; ProductAggregate {&lt;/p&gt;&lt;p style=&quot;margin:0;&quot;&gt;&#x9;&lt;/p&gt;&lt;p style=&quot;margin:0;&quot;&gt;&#x9;&lt;span style=&quot;color:#7f0055;font-weight:bold;&quot;&gt;private&lt;/span&gt; &lt;span style=&quot;color:#7f0055;font-weight:bold;&quot;&gt;final&lt;/span&gt; &lt;span style=&quot;color:#7f0055;font-weight:bold;&quot;&gt;int&lt;/span&gt; &lt;span style=&quot;color:#0000c0;&quot;&gt;productId&lt;/span&gt;;&lt;/p&gt;&lt;p style=&quot;margin:0;&quot;&gt;&#x9;&lt;span style=&quot;color:#7f0055;font-weight:bold;&quot;&gt;private&lt;/span&gt; &lt;span style=&quot;color:#7f0055;font-weight:bold;&quot;&gt;final&lt;/span&gt; String &lt;span style=&quot;color:#0000c0;&quot;&gt;name&lt;/span&gt;;&lt;/p&gt;&lt;p style=&quot;margin:0;&quot;&gt;&#x9;&lt;span style=&quot;color:#7f0055;font-weight:bold;&quot;&gt;private&lt;/span&gt; &lt;span style=&quot;color:#7f0055;font-weight:bold;&quot;&gt;final&lt;/span&gt; &lt;span style=&quot;color:#7f0055;font-weight:bold;&quot;&gt;int&lt;/span&gt; &lt;span style=&quot;color:#0000c0;&quot;&gt;weight&lt;/span&gt;;&lt;/p&gt;&lt;p style=&quot;margin:0;&quot;&gt;&#x9;&lt;span style=&quot;color:#7f0055;font-weight:bold;&quot;&gt;private&lt;/span&gt; &lt;span style=&quot;color:#7f0055;font-weight:bold;&quot;&gt;final&lt;/span&gt; List&amp;lt;RecommendationSummary&amp;gt; &lt;span style=&quot;color:#0000c0;&quot;&gt;recommendations&lt;/span&gt;;&lt;/p&gt;&lt;p style=&quot;margin:0;&quot;&gt;&#x9;&lt;span style=&quot;color:#7f0055;font-weight:bold;&quot;&gt;private&lt;/span&gt; &lt;span style=&quot;color:#7f0055;font-weight:bold;&quot;&gt;final&lt;/span&gt; List&amp;lt;ReviewSummary&amp;gt; &lt;span style=&quot;color:#0000c0;&quot;&gt;reviews&lt;/span&gt;;&lt;/p&gt;&lt;p style=&quot;margin:0;&quot;&gt;&#x9;&lt;span style=&quot;color:#7f0055;font-weight:bold;&quot;&gt;private&lt;/span&gt; &lt;span style=&quot;color:#7f0055;font-weight:bold;&quot;&gt;final&lt;/span&gt; ServiceAddresses &lt;span style=&quot;color:#0000c0;&quot;&gt;serviceAddresses&lt;/span&gt;;&lt;/p&gt;&lt;p style=&quot;margin:0;&quot;&gt;&#x9;&lt;/p&gt;&lt;p style=&quot;margin:0;&quot;&gt;&#x9;&lt;span style=&quot;color:#7f0055;font-weight:bold;&quot;&gt;public&lt;/span&gt; ProductAggregate(&lt;span style=&quot;color:#7f0055;font-weight:bold;&quot;&gt;int&lt;/span&gt; &lt;span style=&quot;color:#6a3e3e;&quot;&gt;productId&lt;/span&gt;,  String &lt;span style=&quot;color:#6a3e3e;&quot;&gt;name&lt;/span&gt;, &lt;span style=&quot;color:#7f0055;font-weight:bold;&quot;&gt;int&lt;/span&gt; &lt;span style=&quot;color:#6a3e3e;&quot;&gt;weight&lt;/span&gt;, &lt;/p&gt;&lt;p style=&quot;margin:0;&quot;&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;&#x9;&lt;/span&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;&#x9;&lt;/span&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;&#x9;&lt;/span&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;&#x9;&lt;/span&gt;List&amp;lt;RecommendationSummary&amp;gt; &lt;span style=&quot;color:#6a3e3e;&quot;&gt;recommendations&lt;/span&gt;, &lt;/p&gt;&lt;p style=&quot;margin:0;&quot;&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;&#x9;&lt;/span&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;&#x9;&lt;/span&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;&#x9;&lt;/span&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;&#x9;&lt;/span&gt;List&amp;lt;ReviewSummary&amp;gt; &lt;span style=&quot;color:#6a3e3e;&quot;&gt;reviews&lt;/span&gt;, &lt;/p&gt;&lt;p style=&quot;margin:0;&quot;&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;&#x9;&lt;/span&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;&#x9;&lt;/span&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;&#x9;&lt;/span&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;&#x9;&lt;/span&gt;ServiceAddresses &lt;span style=&quot;color:#6a3e3e;&quot;&gt;serviceAddresses&lt;/span&gt;) {&lt;/p&gt;&lt;p style=&quot;margin:0;&quot;&gt;&#x9;&#x9;&lt;span style=&quot;color:#7f0055;font-weight:bold;&quot;&gt;this&lt;/span&gt;.&lt;span style=&quot;color:#0000c0;&quot;&gt;productId&lt;/span&gt; = &lt;span style=&quot;color:#6a3e3e;&quot;&gt;productId&lt;/span&gt;;&lt;/p&gt;&lt;p style=&quot;margin:0;&quot;&gt;&#x9;&#x9;&lt;span style=&quot;color:#7f0055;font-weight:bold;&quot;&gt;this&lt;/span&gt;.&lt;span style=&quot;color:#0000c0;&quot;&gt;name&lt;/span&gt; = &lt;span style=&quot;color:#6a3e3e;&quot;&gt;name&lt;/span&gt;;&lt;/p&gt;&lt;p style=&quot;margin:0;&quot;&gt;&#x9;&#x9;&lt;span style=&quot;color:#7f0055;font-weight:bold;&quot;&gt;this&lt;/span&gt;.&lt;span style=&quot;color:#0000c0;&quot;&gt;weight&lt;/span&gt; = &lt;span style=&quot;color:#6a3e3e;&quot;&gt;weight&lt;/span&gt;;&lt;/p&gt;&lt;p style=&quot;margin:0;&quot;&gt;&#x9;&#x9;&lt;span style=&quot;color:#7f0055;font-weight:bold;&quot;&gt;this&lt;/span&gt;.&lt;span style=&quot;color:#0000c0;&quot;&gt;recommendations&lt;/span&gt; = &lt;span style=&quot;color:#6a3e3e;&quot;&gt;recommendations&lt;/span&gt;;&lt;/p&gt;&lt;p style=&quot;margin:0;&quot;&gt;&#x9;&#x9;&lt;span style=&quot;color:#7f0055;font-weight:bold;&quot;&gt;this&lt;/span&gt;.&lt;span style=&quot;color:#0000c0;&quot;&gt;reviews&lt;/span&gt; = &lt;span style=&quot;color:#6a3e3e;&quot;&gt;reviews&lt;/span&gt;;&lt;/p&gt;&lt;p style=&quot;margin:0;&quot;&gt;&#x9;&#x9;&lt;span style=&quot;color:#7f0055;font-weight:bold;&quot;&gt;this&lt;/span&gt;.&lt;span style=&quot;color:#0000c0;&quot;&gt;serviceAddresses&lt;/span&gt; = &lt;span style=&quot;color:#6a3e3e;&quot;&gt;serviceAddresses&lt;/span&gt;;&lt;/p&gt;&lt;p style=&quot;margin:0;&quot;&gt;&#x9;}&lt;/p&gt;&lt;p style=&quot;margin:0;&quot;&gt;&lt;br&gt;&lt;/p&gt;&lt;p style=&quot;margin:0;&quot;&gt;&#x9;&lt;span style=&quot;color:#7f0055;font-weight:bold;&quot;&gt;public&lt;/span&gt; &lt;span style=&quot;color:#7f0055;font-weight:bold;&quot;&gt;int&lt;/span&gt; getProductId() {&lt;/p&gt;&lt;p style=&quot;margin:0;&quot;&gt;&#x9;&#x9;&lt;span style=&quot;color:#7f0055;font-weight:bold;&quot;&gt;return&lt;/span&gt; &lt;span style=&quot;color:#0000c0;&quot;&gt;productId&lt;/span&gt;;&lt;/p&gt;&lt;p style=&quot;margin:0;&quot;&gt;&#x9;}&lt;/p&gt;&lt;p style=&quot;margin:0;&quot;&gt;&lt;br&gt;&lt;/p&gt;&lt;p style=&quot;margin:0;&quot;&gt;&#x9;&lt;span style=&quot;color:#7f0055;font-weight:bold;&quot;&gt;public&lt;/span&gt; String getName() {&lt;/p&gt;&lt;p style=&quot;margin:0;&quot;&gt;&#x9;&#x9;&lt;span style=&quot;color:#7f0055;font-weight:bold;&quot;&gt;return&lt;/span&gt; &lt;span style=&quot;color:#0000c0;&quot;&gt;name&lt;/span&gt;;&lt;/p&gt;&lt;p style=&quot;margin:0;&quot;&gt;&#x9;}&lt;/p&gt;&lt;p style=&quot;margin:0;&quot;&gt;&lt;br&gt;&lt;/p&gt;&lt;p style=&quot;margin:0;&quot;&gt;&#x9;&lt;span style=&quot;color:#7f0055;font-weight:bold;&quot;&gt;public&lt;/span&gt; &lt;span style=&quot;color:#7f0055;font-weight:bold;&quot;&gt;int&lt;/span&gt; getWeight() {&lt;/p&gt;&lt;p style=&quot;margin:0;&quot;&gt;&#x9;&#x9;&lt;span style=&quot;color:#7f0055;font-weight:bold;&quot;&gt;return&lt;/span&gt; &lt;span style=&quot;color:#0000c0;&quot;&gt;weight&lt;/span&gt;;&lt;/p&gt;&lt;p style=&quot;margin:0;&quot;&gt;&#x9;}&lt;/p&gt;&lt;p style=&quot;margin:0;&quot;&gt;&lt;br&gt;&lt;/p&gt;&lt;p style=&quot;margin:0;&quot;&gt;&#x9;&lt;span style=&quot;color:#7f0055;font-weight:bold;&quot;&gt;public&lt;/span&gt; List&amp;lt;RecommendationSummary&amp;gt; getRecommendations() {&lt;/p&gt;&lt;p style=&quot;margin:0;&quot;&gt;&#x9;&#x9;&lt;span style=&quot;color:#7f0055;font-weight:bold;&quot;&gt;return&lt;/span&gt; &lt;span style=&quot;color:#0000c0;&quot;&gt;recommendations&lt;/span&gt;;&lt;/p&gt;&lt;p style=&quot;margin:0;&quot;&gt;&#x9;}&lt;/p&gt;&lt;p style=&quot;margin:0;&quot;&gt;&lt;br&gt;&lt;/p&gt;&lt;p style=&quot;margin:0;&quot;&gt;&#x9;&lt;span style=&quot;color:#7f0055;font-weight:bold;&quot;&gt;public&lt;/span&gt; List&amp;lt;ReviewSummary&amp;gt; getReviews() {&lt;/p&gt;&lt;p style=&quot;margin:0;&quot;&gt;&#x9;&#x9;&lt;span style=&quot;color:#7f0055;font-weight:bold;&quot;&gt;return&lt;/span&gt; &lt;span style=&quot;color:#0000c0;&quot;&gt;reviews&lt;/span&gt;;&lt;/p&gt;&lt;p style=&quot;margin:0;&quot;&gt;&#x9;}&lt;/p&gt;&lt;p style=&quot;margin:0;&quot;&gt;&lt;br&gt;&lt;/p&gt;&lt;p style=&quot;margin:0;&quot;&gt;&#x9;&lt;span style=&quot;color:#7f0055;font-weight:bold;&quot;&gt;public&lt;/span&gt; ServiceAddresses getServiceAddresses() {&lt;/p&gt;&lt;p style=&quot;margin:0;&quot;&gt;&#x9;&#x9;&lt;span style=&quot;color:#7f0055;font-weight:bold;&quot;&gt;return&lt;/span&gt; &lt;span style=&quot;color:#0000c0;&quot;&gt;serviceAddresses&lt;/span&gt;;&lt;/p&gt;&lt;p style=&quot;margin:0;&quot;&gt;&#x9;}&lt;/p&gt;&lt;p style=&quot;margin:0;&quot;&gt;}&lt;/p&gt;&lt;p style=&quot;margin:0;&quot;&gt;&lt;/p&gt;&lt;/div&gt;&lt;/div&gt;" style="text;html=1;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;" vertex="1" parent="1">
          <mxGeometry x="1500" y="240" width="630" height="810" as="geometry" />
        </mxCell>
        <mxCell id="ASkFnVq22RRDwnPk15t2-7" value="" style="endArrow=none;html=1;rounded=1;exitX=0.388;exitY=0.88;exitDx=0;exitDy=0;exitPerimeter=0;movable=1;resizable=1;rotatable=1;deletable=1;editable=1;locked=0;connectable=1;curved=0;strokeWidth=3;strokeColor=#666600;" edge="1" parent="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="558.0299999999999" y="900" as="sourcePoint" />
            <mxPoint x="1490" y="320" as="targetPoint" />
            <Array as="points">
              <mxPoint x="1400" y="900" />
              <mxPoint x="1400" y="320" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="ASkFnVq22RRDwnPk15t2-8" value="" style="endArrow=none;html=1;rounded=1;movable=1;resizable=1;rotatable=1;deletable=1;editable=1;locked=0;connectable=1;strokeColor=#999900;curved=0;strokeWidth=3;" edge="1" parent="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="557" y="770" as="sourcePoint" />
            <mxPoint x="1397" y="770" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="ASkFnVq22RRDwnPk15t2-11" value="&lt;b&gt;&lt;font style=&quot;font-size: 34px;&quot;&gt;1&lt;/font&gt;&lt;/b&gt;" style="ellipse;whiteSpace=wrap;html=1;aspect=fixed;fillColor=#006600;strokeColor=none;fontColor=#CCFFFF;" vertex="1" parent="1">
          <mxGeometry x="60" y="740" width="40" height="40" as="geometry" />
        </mxCell>
        <mxCell id="ASkFnVq22RRDwnPk15t2-12" value="&lt;b&gt;&lt;font style=&quot;font-size: 34px;&quot;&gt;1&lt;/font&gt;&lt;/b&gt;" style="ellipse;whiteSpace=wrap;html=1;aspect=fixed;fillColor=#006600;strokeColor=none;fontColor=#CCFFFF;" vertex="1" parent="1">
          <mxGeometry x="50" y="1750" width="40" height="40" as="geometry" />
        </mxCell>
        <mxCell id="ASkFnVq22RRDwnPk15t2-15" value="&lt;b&gt;&lt;font style=&quot;font-size: 34px;&quot;&gt;2&lt;/font&gt;&lt;/b&gt;" style="ellipse;whiteSpace=wrap;html=1;aspect=fixed;fillColor=#006600;strokeColor=none;fontColor=#CCFFFF;" vertex="1" parent="1">
          <mxGeometry x="60" y="870" width="40" height="40" as="geometry" />
        </mxCell>
        <mxCell id="ASkFnVq22RRDwnPk15t2-17" value="&lt;b&gt;&lt;font style=&quot;font-size: 34px;&quot;&gt;2&lt;/font&gt;&lt;/b&gt;" style="ellipse;whiteSpace=wrap;html=1;aspect=fixed;fillColor=#006600;strokeColor=none;fontColor=#CCFFFF;" vertex="1" parent="1">
          <mxGeometry x="50" y="2410" width="40" height="40" as="geometry" />
        </mxCell>
        <mxCell id="ASkFnVq22RRDwnPk15t2-18" value="&lt;b&gt;&lt;font style=&quot;font-size: 34px;&quot;&gt;3&lt;/font&gt;&lt;/b&gt;" style="ellipse;whiteSpace=wrap;html=1;aspect=fixed;fillColor=#006600;strokeColor=none;fontColor=#CCFFFF;" vertex="1" parent="1">
          <mxGeometry x="60" y="928" width="40" height="40" as="geometry" />
        </mxCell>
        <mxCell id="ASkFnVq22RRDwnPk15t2-20" value="&lt;b&gt;&lt;font style=&quot;font-size: 34px;&quot;&gt;3&lt;/font&gt;&lt;/b&gt;" style="ellipse;whiteSpace=wrap;html=1;aspect=fixed;fillColor=#006600;strokeColor=none;fontColor=#CCFFFF;" vertex="1" parent="1">
          <mxGeometry x="60" y="2870" width="40" height="40" as="geometry" />
        </mxCell>
        <mxCell id="ASkFnVq22RRDwnPk15t2-21" value="&lt;div style=&quot;background-color:#ffffff;padding:0px 0px 0px 2px;&quot;&gt;&lt;div style=&quot;font-family: Monospace; font-size: 10pt; white-space: pre;&quot;&gt;&lt;p style=&quot;margin:0;&quot;&gt;&lt;span style=&quot;color:#7f0055;font-weight:bold;&quot;&gt;package&lt;/span&gt; com.david.microservices.alpha.composite.product.services;&lt;/p&gt;&lt;p style=&quot;margin:0;&quot;&gt;&lt;br&gt;&lt;/p&gt;&lt;p style=&quot;margin:0;&quot;&gt;&lt;span style=&quot;color:#7f0055;font-weight:bold;&quot;&gt;import&lt;/span&gt; &lt;span style=&quot;color:#7f0055;font-weight:bold;&quot;&gt;static&lt;/span&gt; org.springframework.http.HttpMethod.&lt;span style=&quot;color:#0000c0;font-style:italic;font-weight:bold;&quot;&gt;GET&lt;/span&gt;;&lt;/p&gt;&lt;p style=&quot;margin:0;&quot;&gt;&lt;br&gt;&lt;/p&gt;&lt;p style=&quot;margin:0;&quot;&gt;&lt;span style=&quot;color:#7f0055;font-weight:bold;&quot;&gt;import&lt;/span&gt; java.io.IOException;&lt;/p&gt;&lt;p style=&quot;margin:0;&quot;&gt;&lt;span style=&quot;color:#7f0055;font-weight:bold;&quot;&gt;import&lt;/span&gt; java.util.ArrayList;&lt;/p&gt;&lt;p style=&quot;margin:0;&quot;&gt;&lt;span style=&quot;color:#7f0055;font-weight:bold;&quot;&gt;import&lt;/span&gt; java.util.List;&lt;/p&gt;&lt;p style=&quot;margin:0;&quot;&gt;&lt;br&gt;&lt;/p&gt;&lt;p style=&quot;margin:0;&quot;&gt;&lt;span style=&quot;color:#7f0055;font-weight:bold;&quot;&gt;import&lt;/span&gt; org.slf4j.Logger;&lt;/p&gt;&lt;p style=&quot;margin:0;&quot;&gt;&lt;span style=&quot;color:#7f0055;font-weight:bold;&quot;&gt;import&lt;/span&gt; org.slf4j.LoggerFactory;&lt;/p&gt;&lt;p style=&quot;margin:0;&quot;&gt;&lt;span style=&quot;color:#7f0055;font-weight:bold;&quot;&gt;import&lt;/span&gt; org.springframework.beans.factory.annotation.Autowired;&lt;/p&gt;&lt;p style=&quot;margin:0;&quot;&gt;&lt;span style=&quot;color:#7f0055;font-weight:bold;&quot;&gt;import&lt;/span&gt; org.springframework.beans.factory.annotation.Value;&lt;/p&gt;&lt;p style=&quot;margin:0;&quot;&gt;&lt;span style=&quot;color:#7f0055;font-weight:bold;&quot;&gt;import&lt;/span&gt; org.springframework.core.ParameterizedTypeReference;&lt;/p&gt;&lt;p style=&quot;margin:0;&quot;&gt;&lt;span style=&quot;color:#7f0055;font-weight:bold;&quot;&gt;import&lt;/span&gt; org.springframework.http.HttpStatus;&lt;/p&gt;&lt;p style=&quot;margin:0;&quot;&gt;&lt;span style=&quot;color:#7f0055;font-weight:bold;&quot;&gt;import&lt;/span&gt; org.springframework.stereotype.Component;&lt;/p&gt;&lt;p style=&quot;margin:0;&quot;&gt;&lt;span style=&quot;color:#7f0055;font-weight:bold;&quot;&gt;import&lt;/span&gt; org.springframework.web.client.HttpClientErrorException;&lt;/p&gt;&lt;p style=&quot;margin:0;&quot;&gt;&lt;span style=&quot;color:#7f0055;font-weight:bold;&quot;&gt;import&lt;/span&gt; org.springframework.web.client.RestTemplate;&lt;/p&gt;&lt;p style=&quot;margin:0;&quot;&gt;&lt;br&gt;&lt;/p&gt;&lt;p style=&quot;margin:0;&quot;&gt;&lt;span style=&quot;color:#7f0055;font-weight:bold;&quot;&gt;import&lt;/span&gt; com.david.microservices.alpha.api.core.product.Product;&lt;/p&gt;&lt;p style=&quot;margin:0;&quot;&gt;&lt;span style=&quot;color:#7f0055;font-weight:bold;&quot;&gt;import&lt;/span&gt; com.david.microservices.alpha.api.core.product.ProductService;&lt;/p&gt;&lt;p style=&quot;margin:0;&quot;&gt;&lt;span style=&quot;color:#7f0055;font-weight:bold;&quot;&gt;import&lt;/span&gt; com.david.microservices.alpha.api.core.recommendation.Recommendation;&lt;/p&gt;&lt;p style=&quot;margin:0;&quot;&gt;&lt;span style=&quot;color:#7f0055;font-weight:bold;&quot;&gt;import&lt;/span&gt; com.david.microservices.alpha.api.core.recommendation.RecommendationService;&lt;/p&gt;&lt;p style=&quot;margin:0;&quot;&gt;&lt;span style=&quot;color:#7f0055;font-weight:bold;&quot;&gt;import&lt;/span&gt; com.david.microservices.alpha.api.core.review.Review;&lt;/p&gt;&lt;p style=&quot;margin:0;&quot;&gt;&lt;span style=&quot;color:#7f0055;font-weight:bold;&quot;&gt;import&lt;/span&gt; com.david.microservices.alpha.api.core.review.ReviewService;&lt;/p&gt;&lt;p style=&quot;margin:0;&quot;&gt;&lt;span style=&quot;color:#7f0055;font-weight:bold;&quot;&gt;import&lt;/span&gt; com.david.microservices.alpha.api.exceptions.InvalidInputException;&lt;/p&gt;&lt;p style=&quot;margin:0;&quot;&gt;&lt;span style=&quot;color:#7f0055;font-weight:bold;&quot;&gt;import&lt;/span&gt; com.david.microservices.alpha.api.exceptions.NotFoundException;&lt;/p&gt;&lt;p style=&quot;margin:0;&quot;&gt;&lt;span style=&quot;color:#7f0055;font-weight:bold;&quot;&gt;import&lt;/span&gt; com.david.microservices.alpha.util.http.HttpErrorInfo;&lt;/p&gt;&lt;p style=&quot;margin:0;&quot;&gt;&lt;span style=&quot;color:#7f0055;font-weight:bold;&quot;&gt;import&lt;/span&gt; com.fasterxml.jackson.databind.ObjectMapper;&lt;/p&gt;&lt;p style=&quot;margin:0;&quot;&gt;&lt;br&gt;&lt;/p&gt;&lt;p style=&quot;margin:0;&quot;&gt;&lt;span style=&quot;color:#646464;&quot;&gt;@Component&lt;/span&gt;&lt;/p&gt;&lt;p style=&quot;margin:0;&quot;&gt;&lt;span style=&quot;color:#7f0055;font-weight:bold;&quot;&gt;public&lt;/span&gt; &lt;span style=&quot;color:#7f0055;font-weight:bold;&quot;&gt;class&lt;/span&gt; ProductCompositeIntegration &lt;span style=&quot;color:#7f0055;font-weight:bold;&quot;&gt;implements&lt;/span&gt; ProductService, RecommendationService, ReviewService {&lt;/p&gt;&lt;p style=&quot;margin:0;&quot;&gt;&#x9;&lt;/p&gt;&lt;p style=&quot;margin:0;&quot;&gt;&#x9;&lt;span style=&quot;color:#7f0055;font-weight:bold;&quot;&gt;private&lt;/span&gt; &lt;span style=&quot;color:#7f0055;font-weight:bold;&quot;&gt;final&lt;/span&gt; Logger &lt;span style=&quot;color:#0000c0;&quot;&gt;LOG&lt;/span&gt; = LoggerFactory.&lt;span style=&quot;font-style: italic;&quot;&gt;getLogger&lt;/span&gt;(ProductCompositeIntegration.&lt;span style=&quot;color:#7f0055;font-weight:bold;&quot;&gt;class&lt;/span&gt;);&lt;/p&gt;&lt;p style=&quot;margin:0;&quot;&gt;&#x9;&lt;/p&gt;&lt;p style=&quot;margin:0;&quot;&gt;&#x9;&lt;span style=&quot;color:#7f0055;font-weight:bold;&quot;&gt;private&lt;/span&gt; &lt;span style=&quot;color:#7f0055;font-weight:bold;&quot;&gt;final&lt;/span&gt; RestTemplate &lt;span style=&quot;color:#0000c0;&quot;&gt;restTemplate&lt;/span&gt;;&lt;/p&gt;&lt;p style=&quot;margin:0;&quot;&gt;&#x9;&lt;span style=&quot;color:#7f0055;font-weight:bold;&quot;&gt;private&lt;/span&gt; &lt;span style=&quot;color:#7f0055;font-weight:bold;&quot;&gt;final&lt;/span&gt; ObjectMapper &lt;span style=&quot;color:#0000c0;&quot;&gt;mapper&lt;/span&gt;;&lt;/p&gt;&lt;p style=&quot;margin:0;&quot;&gt;&#x9;&lt;/p&gt;&lt;p style=&quot;margin:0;&quot;&gt;&#x9;&lt;span style=&quot;color:#7f0055;font-weight:bold;&quot;&gt;private&lt;/span&gt; &lt;span style=&quot;color:#7f0055;font-weight:bold;&quot;&gt;final&lt;/span&gt; String &lt;span style=&quot;color:#0000c0;&quot;&gt;productServiceUrl&lt;/span&gt;;&lt;/p&gt;&lt;p style=&quot;margin:0;&quot;&gt;&#x9;&lt;span style=&quot;color:#7f0055;font-weight:bold;&quot;&gt;private&lt;/span&gt; &lt;span style=&quot;color:#7f0055;font-weight:bold;&quot;&gt;final&lt;/span&gt; String &lt;span style=&quot;color:#0000c0;&quot;&gt;recommendationServiceUrl&lt;/span&gt;;&lt;/p&gt;&lt;p style=&quot;margin:0;&quot;&gt;&#x9;&lt;span style=&quot;color:#7f0055;font-weight:bold;&quot;&gt;private&lt;/span&gt; &lt;span style=&quot;color:#7f0055;font-weight:bold;&quot;&gt;final&lt;/span&gt; String &lt;span style=&quot;color:#0000c0;&quot;&gt;reviewServiceUrl&lt;/span&gt;;&lt;/p&gt;&lt;p style=&quot;margin:0;&quot;&gt;&#x9;&lt;/p&gt;&lt;p style=&quot;margin:0;&quot;&gt;&#x9;&lt;span style=&quot;color: rgb(100, 100, 100); text-decoration-line: underline; text-decoration-color: rgb(244, 200, 45); text-decoration-style: wavy;&quot;&gt;@Autowired&lt;/span&gt;&lt;/p&gt;&lt;p style=&quot;margin:0;&quot;&gt;&#x9;&lt;span style=&quot;color:#7f0055;font-weight:bold;&quot;&gt;public&lt;/span&gt; ProductCompositeIntegration(RestTemplate &lt;span style=&quot;color:#6a3e3e;&quot;&gt;restTemplate&lt;/span&gt;, ObjectMapper &lt;span style=&quot;color:#6a3e3e;&quot;&gt;mapper&lt;/span&gt;, &lt;/p&gt;&lt;p style=&quot;margin:0;&quot;&gt;&#x9;&#x9;&#x9;&lt;span style=&quot;color:#646464;&quot;&gt;@Value&lt;/span&gt;(&lt;span style=&quot;color:#2a00ff;&quot;&gt;&quot;${app.product-service.host}&quot;&lt;/span&gt;) &lt;/p&gt;&lt;p style=&quot;margin:0;&quot;&gt;&#x9;&#x9;&#x9;String &lt;span style=&quot;color:#6a3e3e;&quot;&gt;productServiceHost&lt;/span&gt;, &lt;/p&gt;&lt;p style=&quot;margin:0;&quot;&gt;&#x9;&#x9;&#x9;&lt;/p&gt;&lt;p style=&quot;margin:0;&quot;&gt;&#x9;&#x9;&#x9;&lt;span style=&quot;color:#646464;&quot;&gt;@Value&lt;/span&gt;(&lt;span style=&quot;color:#2a00ff;&quot;&gt;&quot;${app.product-service.port}&quot;&lt;/span&gt;) &lt;/p&gt;&lt;p style=&quot;margin:0;&quot;&gt;&#x9;&#x9;&#x9;String &lt;span style=&quot;color:#6a3e3e;&quot;&gt;productServicePort&lt;/span&gt;,&lt;/p&gt;&lt;p style=&quot;margin:0;&quot;&gt;&#x9;&#x9;&#x9;&lt;/p&gt;&lt;p style=&quot;margin:0;&quot;&gt;&#x9;&#x9;&#x9;&lt;span style=&quot;color:#646464;&quot;&gt;@Value&lt;/span&gt;(&lt;span style=&quot;color:#2a00ff;&quot;&gt;&quot;${app.recommendation-service.host}&quot;&lt;/span&gt;) &lt;/p&gt;&lt;p style=&quot;margin:0;&quot;&gt;&#x9;&#x9;&#x9;String &lt;span style=&quot;color:#6a3e3e;&quot;&gt;recommendationServiceHost&lt;/span&gt;, &lt;/p&gt;&lt;p style=&quot;margin:0;&quot;&gt;&#x9;&#x9;&#x9;&lt;/p&gt;&lt;p style=&quot;margin:0;&quot;&gt;&#x9;&#x9;&#x9;&lt;span style=&quot;color:#646464;&quot;&gt;@Value&lt;/span&gt;(&lt;span style=&quot;color:#2a00ff;&quot;&gt;&quot;${app.recommendation-service.port}&quot;&lt;/span&gt;) &lt;/p&gt;&lt;p style=&quot;margin:0;&quot;&gt;&#x9;&#x9;&#x9;String &lt;span style=&quot;color:#6a3e3e;&quot;&gt;recommendationServicePort&lt;/span&gt;,&lt;/p&gt;&lt;p style=&quot;margin:0;&quot;&gt;&#x9;&#x9;&#x9;&lt;/p&gt;&lt;p style=&quot;margin:0;&quot;&gt;&#x9;&#x9;&#x9;&lt;span style=&quot;color:#646464;&quot;&gt;@Value&lt;/span&gt;(&lt;span style=&quot;color:#2a00ff;&quot;&gt;&quot;${app.review-service.host}&quot;&lt;/span&gt;) &lt;/p&gt;&lt;p style=&quot;margin:0;&quot;&gt;&#x9;&#x9;&#x9;String &lt;span style=&quot;color:#6a3e3e;&quot;&gt;reviewServiceHost&lt;/span&gt;, &lt;/p&gt;&lt;p style=&quot;margin:0;&quot;&gt;&#x9;&#x9;&#x9;&lt;/p&gt;&lt;p style=&quot;margin:0;&quot;&gt;&#x9;&#x9;&#x9;&lt;span style=&quot;color:#646464;&quot;&gt;@Value&lt;/span&gt;(&lt;span style=&quot;color:#2a00ff;&quot;&gt;&quot;${app.review-service.port}&quot;&lt;/span&gt;) &lt;/p&gt;&lt;p style=&quot;margin:0;&quot;&gt;&#x9;&#x9;&#x9;String &lt;span style=&quot;color:#6a3e3e;&quot;&gt;reviewServicePort&lt;/span&gt;) {&lt;/p&gt;&lt;p style=&quot;margin:0;&quot;&gt;&#x9;&#x9;&lt;/p&gt;&lt;p style=&quot;margin:0;&quot;&gt;&#x9;&#x9;&lt;span style=&quot;color:#7f0055;font-weight:bold;&quot;&gt;this&lt;/span&gt;.&lt;span style=&quot;color:#0000c0;&quot;&gt;restTemplate&lt;/span&gt; = &lt;span style=&quot;color:#6a3e3e;&quot;&gt;restTemplate&lt;/span&gt;;&lt;/p&gt;&lt;p style=&quot;margin:0;&quot;&gt;&#x9;&#x9;&lt;span style=&quot;color:#7f0055;font-weight:bold;&quot;&gt;this&lt;/span&gt;.&lt;span style=&quot;color:#0000c0;&quot;&gt;mapper&lt;/span&gt; = &lt;span style=&quot;color:#6a3e3e;&quot;&gt;mapper&lt;/span&gt;;&lt;/p&gt;&lt;p style=&quot;margin:0;&quot;&gt;&#x9;&#x9;&lt;/p&gt;&lt;p style=&quot;margin:0;&quot;&gt;&#x9;&#x9;&lt;span style=&quot;color:#7f0055;font-weight:bold;&quot;&gt;this&lt;/span&gt;.&lt;span style=&quot;color:#0000c0;&quot;&gt;productServiceUrl&lt;/span&gt; = &lt;span style=&quot;color:#2a00ff;&quot;&gt;&quot;http://&quot;&lt;/span&gt; + &lt;span style=&quot;color:#6a3e3e;&quot;&gt;productServiceHost&lt;/span&gt; + &lt;span style=&quot;color:#2a00ff;&quot;&gt;&quot;:&quot;&lt;/span&gt; + &lt;span style=&quot;color:#6a3e3e;&quot;&gt;productServicePort&lt;/span&gt; + &lt;span style=&quot;color:#2a00ff;&quot;&gt;&quot;/product/&quot;&lt;/span&gt;;&lt;/p&gt;&lt;p style=&quot;margin:0;&quot;&gt;&#x9;&#x9;&lt;span style=&quot;color:#7f0055;font-weight:bold;&quot;&gt;this&lt;/span&gt;.&lt;span style=&quot;color:#0000c0;&quot;&gt;recommendationServiceUrl&lt;/span&gt; = &lt;span style=&quot;color:#2a00ff;&quot;&gt;&quot;http://&quot;&lt;/span&gt; + &lt;span style=&quot;color:#6a3e3e;&quot;&gt;recommendationServiceHost&lt;/span&gt; + &lt;span style=&quot;color:#2a00ff;&quot;&gt;&quot;:&quot;&lt;/span&gt; + &lt;span style=&quot;color:#6a3e3e;&quot;&gt;recommendationServicePort&lt;/span&gt; + &lt;span style=&quot;color:#2a00ff;&quot;&gt;&quot;/recommendations?productId=&quot;&lt;/span&gt;;&lt;/p&gt;&lt;p style=&quot;margin:0;&quot;&gt;&#x9;&#x9;&lt;span style=&quot;color:#7f0055;font-weight:bold;&quot;&gt;this&lt;/span&gt;.&lt;span style=&quot;color:#0000c0;&quot;&gt;reviewServiceUrl&lt;/span&gt; = &lt;span style=&quot;color:#2a00ff;&quot;&gt;&quot;http://&quot;&lt;/span&gt; + &lt;span style=&quot;color:#6a3e3e;&quot;&gt;reviewServiceHost&lt;/span&gt; + &lt;span style=&quot;color:#2a00ff;&quot;&gt;&quot;:&quot;&lt;/span&gt; + &lt;span style=&quot;color:#6a3e3e;&quot;&gt;reviewServicePort&lt;/span&gt; + &lt;span style=&quot;color:#2a00ff;&quot;&gt;&quot;/reviews?productId=&quot;&lt;/span&gt;;&lt;/p&gt;&lt;p style=&quot;margin:0;&quot;&gt;&#x9;}&lt;/p&gt;&lt;p style=&quot;margin:0;&quot;&gt;&lt;br&gt;&lt;/p&gt;&lt;p style=&quot;margin:0;&quot;&gt;&#x9;&lt;span style=&quot;color:#646464;&quot;&gt;@Override&lt;/span&gt;&lt;/p&gt;&lt;p style=&quot;margin:0;&quot;&gt;&#x9;&lt;span style=&quot;color:#7f0055;font-weight:bold;&quot;&gt;public&lt;/span&gt; Product getProduct(&lt;span style=&quot;color:#7f0055;font-weight:bold;&quot;&gt;int&lt;/span&gt; &lt;span style=&quot;color:#6a3e3e;&quot;&gt;productId&lt;/span&gt;) {&lt;/p&gt;&lt;p style=&quot;margin:0;&quot;&gt;&#x9;&#x9;&lt;span style=&quot;color:#7f0055;font-weight:bold;&quot;&gt;try&lt;/span&gt; {&lt;/p&gt;&lt;p style=&quot;margin:0;&quot;&gt;&#x9;&#x9;&#x9;String &lt;span style=&quot;color:#6a3e3e;&quot;&gt;url&lt;/span&gt; = &lt;span style=&quot;color:#0000c0;&quot;&gt;productServiceUrl&lt;/span&gt; + &lt;span style=&quot;color:#6a3e3e;&quot;&gt;productId&lt;/span&gt;;&lt;/p&gt;&lt;p style=&quot;margin:0;&quot;&gt;&#x9;&#x9;&#x9;&lt;/p&gt;&lt;p style=&quot;margin:0;&quot;&gt;&#x9;&#x9;&#x9;&lt;span style=&quot;color:#0000c0;&quot;&gt;LOG&lt;/span&gt;.debug(&lt;span style=&quot;color:#2a00ff;&quot;&gt;&quot;Will call getProduct API on URL: {}&quot;&lt;/span&gt;, &lt;span style=&quot;color:#6a3e3e;&quot;&gt;url&lt;/span&gt;);&lt;/p&gt;&lt;p style=&quot;margin:0;&quot;&gt;&#x9;&#x9;&#x9;&lt;/p&gt;&lt;p style=&quot;margin:0;&quot;&gt;&#x9;&#x9;&#x9;Product &lt;span style=&quot;color:#6a3e3e;&quot;&gt;product&lt;/span&gt; = &lt;span style=&quot;color:#0000c0;&quot;&gt;restTemplate&lt;/span&gt;.getForObject(&lt;span style=&quot;color:#6a3e3e;&quot;&gt;url&lt;/span&gt;, Product.&lt;span style=&quot;color:#7f0055;font-weight:bold;&quot;&gt;class&lt;/span&gt;);&lt;/p&gt;&lt;p style=&quot;margin:0;&quot;&gt;&#x9;&#x9;&#x9;&lt;span style=&quot;color:#0000c0;&quot;&gt;LOG&lt;/span&gt;.debug(&lt;span style=&quot;color:#2a00ff;&quot;&gt;&quot;Found a product with id: {}&quot;&lt;/span&gt;, &lt;span style=&quot;color:#6a3e3e;&quot;&gt;product&lt;/span&gt;.getProductId());&lt;/p&gt;&lt;p style=&quot;margin:0;&quot;&gt;&#x9;&#x9;&#x9;&lt;span style=&quot;color:#7f0055;font-weight:bold;&quot;&gt;return&lt;/span&gt; &lt;span style=&quot;color:#6a3e3e;&quot;&gt;product&lt;/span&gt;;&lt;/p&gt;&lt;p style=&quot;margin:0;&quot;&gt;&#x9;&#x9;} &lt;span style=&quot;color:#7f0055;font-weight:bold;&quot;&gt;catch&lt;/span&gt; (HttpClientErrorException &lt;span style=&quot;color:#6a3e3e;&quot;&gt;ex&lt;/span&gt;) {&lt;/p&gt;&lt;p style=&quot;margin:0;&quot;&gt;&#x9;&#x9;&#x9;&lt;span style=&quot;color:#7f0055;font-weight:bold;&quot;&gt;switch&lt;/span&gt;(HttpStatus.&lt;span style=&quot;font-style: italic;&quot;&gt;resolve&lt;/span&gt;(&lt;span style=&quot;color:#6a3e3e;&quot;&gt;ex&lt;/span&gt;.getStatusCode().value())) {&lt;/p&gt;&lt;p style=&quot;margin:0;&quot;&gt;&#x9;&#x9;&#x9;&lt;span style=&quot;color:#7f0055;font-weight:bold;&quot;&gt;case&lt;/span&gt; &lt;span style=&quot;color:#0000c0;font-style:italic;font-weight:bold;&quot;&gt;NOT_FOUND&lt;/span&gt;:&lt;/p&gt;&lt;p style=&quot;margin:0;&quot;&gt;&#x9;&#x9;&#x9;&#x9;&lt;span style=&quot;color:#7f0055;font-weight:bold;&quot;&gt;throw&lt;/span&gt; &lt;span style=&quot;color:#7f0055;font-weight:bold;&quot;&gt;new&lt;/span&gt; NotFoundException(getErrorMessage(&lt;span style=&quot;color:#6a3e3e;&quot;&gt;ex&lt;/span&gt;));&lt;/p&gt;&lt;p style=&quot;margin:0;&quot;&gt;&#x9;&#x9;&#x9;&#x9;&lt;/p&gt;&lt;p style=&quot;margin:0;&quot;&gt;&#x9;&#x9;&#x9;&lt;span style=&quot;color:#7f0055;font-weight:bold;&quot;&gt;case&lt;/span&gt; &lt;span style=&quot;color:#0000c0;font-style:italic;font-weight:bold;&quot;&gt;UNPROCESSABLE_ENTITY&lt;/span&gt;:&lt;/p&gt;&lt;p style=&quot;margin:0;&quot;&gt;&#x9;&#x9;&#x9;&#x9;&lt;span style=&quot;color:#7f0055;font-weight:bold;&quot;&gt;throw&lt;/span&gt; &lt;span style=&quot;color:#7f0055;font-weight:bold;&quot;&gt;new&lt;/span&gt; InvalidInputException(getErrorMessage(&lt;span style=&quot;color:#6a3e3e;&quot;&gt;ex&lt;/span&gt;));&lt;/p&gt;&lt;p style=&quot;margin:0;&quot;&gt;&#x9;&#x9;&#x9;&#x9;&lt;/p&gt;&lt;p style=&quot;margin:0;&quot;&gt;&#x9;&#x9;&#x9;&lt;span style=&quot;color:#7f0055;font-weight:bold;&quot;&gt;default&lt;/span&gt;:&lt;/p&gt;&lt;p style=&quot;margin:0;&quot;&gt;&#x9;&#x9;&#x9;&#x9;&lt;span style=&quot;color:#0000c0;&quot;&gt;LOG&lt;/span&gt;.warn(&lt;span style=&quot;color:#2a00ff;&quot;&gt;&quot;Got an unexpected unexpected HTTP error: {}, will rethrow it&quot;&lt;/span&gt;, &lt;span style=&quot;color:#6a3e3e;&quot;&gt;ex&lt;/span&gt;.getStatusCode());&lt;/p&gt;&lt;p style=&quot;margin:0;&quot;&gt;&#x9;&#x9;&#x9;&#x9;&lt;span style=&quot;color:#0000c0;&quot;&gt;LOG&lt;/span&gt;.warn(&lt;span style=&quot;color:#2a00ff;&quot;&gt;&quot;Error body: {}&quot;&lt;/span&gt;, &lt;span style=&quot;color:#6a3e3e;&quot;&gt;ex&lt;/span&gt;.getResponseBodyAsString());&lt;/p&gt;&lt;p style=&quot;margin:0;&quot;&gt;&#x9;&#x9;&#x9;&#x9;&lt;span style=&quot;color:#7f0055;font-weight:bold;&quot;&gt;throw&lt;/span&gt; &lt;span style=&quot;color:#6a3e3e;&quot;&gt;ex&lt;/span&gt;;&lt;/p&gt;&lt;p style=&quot;margin:0;&quot;&gt;&#x9;&#x9;&#x9;}&lt;/p&gt;&lt;p style=&quot;margin:0;&quot;&gt;&#x9;&#x9;}&lt;/p&gt;&lt;p style=&quot;margin:0;&quot;&gt;&#x9;}&lt;/p&gt;&lt;p style=&quot;margin:0;&quot;&gt;&#x9;&lt;/p&gt;&lt;p style=&quot;margin:0;&quot;&gt;&#x9;&lt;span style=&quot;color:#646464;&quot;&gt;@Override&lt;/span&gt;&lt;/p&gt;&lt;p style=&quot;margin:0;&quot;&gt;&#x9;&lt;span style=&quot;color:#7f0055;font-weight:bold;&quot;&gt;public&lt;/span&gt; Product createProduct(Product &lt;span style=&quot;color:#6a3e3e;&quot;&gt;body&lt;/span&gt;) {&lt;/p&gt;&lt;p style=&quot;margin:0;&quot;&gt;&#x9;&#x9;&lt;span style=&quot;color:#7f0055;font-weight:bold;&quot;&gt;try&lt;/span&gt; {&lt;/p&gt;&lt;p style=&quot;margin:0;&quot;&gt;&#x9;&#x9;&#x9;String &lt;span style=&quot;color:#6a3e3e;&quot;&gt;url&lt;/span&gt; = &lt;span style=&quot;color:#0000c0;&quot;&gt;productServiceUrl&lt;/span&gt;;&lt;/p&gt;&lt;p style=&quot;margin:0;&quot;&gt;&#x9;&#x9;&#x9;&lt;span style=&quot;color:#0000c0;&quot;&gt;LOG&lt;/span&gt;.debug(&lt;span style=&quot;color:#2a00ff;&quot;&gt;&quot;Will post a new product to URL: {}&quot;&lt;/span&gt;, &lt;span style=&quot;color:#6a3e3e;&quot;&gt;url&lt;/span&gt;);&lt;/p&gt;&lt;p style=&quot;margin:0;&quot;&gt;&#x9;&#x9;&#x9;&lt;/p&gt;&lt;p style=&quot;margin:0;&quot;&gt;&#x9;&#x9;&#x9;Product &lt;span style=&quot;color:#6a3e3e;&quot;&gt;product&lt;/span&gt; = &lt;span style=&quot;color:#0000c0;&quot;&gt;restTemplate&lt;/span&gt;.postForObject(&lt;span style=&quot;color:#6a3e3e;&quot;&gt;url&lt;/span&gt;, &lt;span style=&quot;color:#6a3e3e;&quot;&gt;body&lt;/span&gt;, Product.&lt;span style=&quot;color:#7f0055;font-weight:bold;&quot;&gt;class&lt;/span&gt;);&lt;/p&gt;&lt;p style=&quot;margin:0;&quot;&gt;&#x9;&#x9;&#x9;&lt;span style=&quot;color:#0000c0;&quot;&gt;LOG&lt;/span&gt;.debug(&lt;span style=&quot;color:#2a00ff;&quot;&gt;&quot;Created a product with id: {}&quot;&lt;/span&gt;, &lt;span style=&quot;color:#6a3e3e;&quot;&gt;product&lt;/span&gt;.getProductId());&lt;/p&gt;&lt;p style=&quot;margin:0;&quot;&gt;&#x9;&#x9;&#x9;&lt;/p&gt;&lt;p style=&quot;margin:0;&quot;&gt;&#x9;&#x9;&#x9;&lt;span style=&quot;color:#7f0055;font-weight:bold;&quot;&gt;return&lt;/span&gt; &lt;span style=&quot;color:#6a3e3e;&quot;&gt;product&lt;/span&gt;;&lt;/p&gt;&lt;p style=&quot;margin:0;&quot;&gt;&#x9;&#x9;} &lt;span style=&quot;color:#7f0055;font-weight:bold;&quot;&gt;catch&lt;/span&gt; (HttpClientErrorException &lt;span style=&quot;color:#6a3e3e;&quot;&gt;ex&lt;/span&gt;) {&lt;/p&gt;&lt;p style=&quot;margin:0;&quot;&gt;&#x9;&#x9;&#x9;&lt;span style=&quot;color:#7f0055;font-weight:bold;&quot;&gt;throw&lt;/span&gt; handleHttpClientException(&lt;span style=&quot;color:#6a3e3e;&quot;&gt;ex&lt;/span&gt;);&lt;/p&gt;&lt;p style=&quot;margin:0;&quot;&gt;&#x9;&#x9;}&lt;/p&gt;&lt;p style=&quot;margin:0;&quot;&gt;&#x9;}&lt;/p&gt;&lt;p style=&quot;margin:0;&quot;&gt;&lt;br&gt;&lt;/p&gt;&lt;p style=&quot;margin:0;&quot;&gt;&#x9;&lt;span style=&quot;color:#646464;&quot;&gt;@Override&lt;/span&gt;&lt;/p&gt;&lt;p style=&quot;margin:0;&quot;&gt;&#x9;&lt;span style=&quot;color:#7f0055;font-weight:bold;&quot;&gt;public&lt;/span&gt; &lt;span style=&quot;color:#7f0055;font-weight:bold;&quot;&gt;void&lt;/span&gt; deleteProduct(&lt;span style=&quot;color:#7f0055;font-weight:bold;&quot;&gt;int&lt;/span&gt; &lt;span style=&quot;color:#6a3e3e;&quot;&gt;productId&lt;/span&gt;) {&lt;/p&gt;&lt;p style=&quot;margin:0;&quot;&gt;&#x9;&#x9;&lt;span style=&quot;color:#7f0055;font-weight:bold;&quot;&gt;try&lt;/span&gt; {&lt;/p&gt;&lt;p style=&quot;margin:0;&quot;&gt;&#x9;&#x9;&#x9;String &lt;span style=&quot;color:#6a3e3e;&quot;&gt;url&lt;/span&gt; = &lt;span style=&quot;color:#0000c0;&quot;&gt;productServiceUrl&lt;/span&gt; + &lt;span style=&quot;color:#2a00ff;&quot;&gt;&quot;/&quot;&lt;/span&gt; + &lt;span style=&quot;color:#6a3e3e;&quot;&gt;productId&lt;/span&gt;;&lt;/p&gt;&lt;p style=&quot;margin:0;&quot;&gt;&#x9;&#x9;&#x9;&lt;span style=&quot;color:#0000c0;&quot;&gt;LOG&lt;/span&gt;.debug(&lt;span style=&quot;color:#2a00ff;&quot;&gt;&quot;Will call the deleteProduct API on URL: {}&quot;&lt;/span&gt;, &lt;span style=&quot;color:#6a3e3e;&quot;&gt;url&lt;/span&gt;);&lt;/p&gt;&lt;p style=&quot;margin:0;&quot;&gt;&#x9;&#x9;&#x9;&lt;/p&gt;&lt;p style=&quot;margin:0;&quot;&gt;&#x9;&#x9;&#x9;&lt;span style=&quot;color:#0000c0;&quot;&gt;restTemplate&lt;/span&gt;.delete(&lt;span style=&quot;color:#6a3e3e;&quot;&gt;url&lt;/span&gt;);&lt;/p&gt;&lt;p style=&quot;margin:0;&quot;&gt;&#x9;&#x9;&#x9;&lt;/p&gt;&lt;p style=&quot;margin:0;&quot;&gt;&#x9;&#x9;} &lt;span style=&quot;color:#7f0055;font-weight:bold;&quot;&gt;catch&lt;/span&gt; (HttpClientErrorException &lt;span style=&quot;color:#6a3e3e;&quot;&gt;ex&lt;/span&gt;) {&lt;/p&gt;&lt;p style=&quot;margin:0;&quot;&gt;&#x9;&#x9;&#x9;&lt;span style=&quot;color:#7f0055;font-weight:bold;&quot;&gt;throw&lt;/span&gt; handleHttpClientException(&lt;span style=&quot;color:#6a3e3e;&quot;&gt;ex&lt;/span&gt;);&lt;/p&gt;&lt;p style=&quot;margin:0;&quot;&gt;&#x9;&#x9;}&lt;/p&gt;&lt;p style=&quot;margin:0;&quot;&gt;&#x9;}&lt;/p&gt;&lt;p style=&quot;margin:0;&quot;&gt;&#x9;&lt;/p&gt;&lt;p style=&quot;margin:0;&quot;&gt;&#x9;&lt;span style=&quot;color:#646464;&quot;&gt;@Override&lt;/span&gt;&lt;/p&gt;&lt;p style=&quot;margin:0;&quot;&gt;&#x9;&lt;span style=&quot;color:#7f0055;font-weight:bold;&quot;&gt;public&lt;/span&gt; List&amp;lt;Recommendation&amp;gt; getRecommendations(&lt;span style=&quot;color:#7f0055;font-weight:bold;&quot;&gt;int&lt;/span&gt; &lt;span style=&quot;color:#6a3e3e;&quot;&gt;productId&lt;/span&gt;) {&lt;/p&gt;&lt;p style=&quot;margin:0;&quot;&gt;&#x9;&#x9;&lt;/p&gt;&lt;p style=&quot;margin:0;&quot;&gt;&#x9;&#x9;&lt;span style=&quot;color:#7f0055;font-weight:bold;&quot;&gt;try&lt;/span&gt; {&lt;/p&gt;&lt;p style=&quot;margin:0;&quot;&gt;&#x9;&#x9;&#x9;String &lt;span style=&quot;color:#6a3e3e;&quot;&gt;url&lt;/span&gt; = &lt;span style=&quot;color:#0000c0;&quot;&gt;recommendationServiceUrl&lt;/span&gt; + &lt;span style=&quot;color:#6a3e3e;&quot;&gt;productId&lt;/span&gt;;&lt;/p&gt;&lt;p style=&quot;margin:0;&quot;&gt;&#x9;&#x9;&#x9;&lt;/p&gt;&lt;p style=&quot;margin:0;&quot;&gt;&#x9;&#x9;&#x9;&lt;span style=&quot;color:#0000c0;&quot;&gt;LOG&lt;/span&gt;.debug(&lt;span style=&quot;color:#2a00ff;&quot;&gt;&quot;Will call getRecommendations API on URL: {}&quot;&lt;/span&gt;, &lt;span style=&quot;color:#6a3e3e;&quot;&gt;url&lt;/span&gt;);&lt;/p&gt;&lt;p style=&quot;margin:0;&quot;&gt;&#x9;&#x9;&#x9;&lt;/p&gt;&lt;p style=&quot;margin:0;&quot;&gt;&#x9;&#x9;&#x9;List&amp;lt;Recommendation&amp;gt; &lt;span style=&quot;color:#6a3e3e;&quot;&gt;recommendations&lt;/span&gt; = &lt;span style=&quot;color:#0000c0;&quot;&gt;restTemplate&lt;/span&gt;.exchange(&lt;span style=&quot;color:#6a3e3e;&quot;&gt;url&lt;/span&gt;, &lt;span style=&quot;color:#0000c0;font-style:italic;font-weight:bold;&quot;&gt;GET&lt;/span&gt;, &lt;span style=&quot;color:#7f0055;font-weight:bold;&quot;&gt;null&lt;/span&gt;, &lt;span style=&quot;color:#7f0055;font-weight:bold;&quot;&gt;new&lt;/span&gt; ParameterizedTypeReference&amp;lt;List&amp;lt;Recommendation&amp;gt;&amp;gt;() {}).getBody();&lt;/p&gt;&lt;p style=&quot;margin:0;&quot;&gt;&#x9;&#x9;&#x9;&lt;/p&gt;&lt;p style=&quot;margin:0;&quot;&gt;&#x9;&#x9;&#x9;&lt;span style=&quot;color:#0000c0;&quot;&gt;LOG&lt;/span&gt;.debug(&lt;span style=&quot;color:#2a00ff;&quot;&gt;&quot;Found {} recommendations for a product with id: {}&quot;&lt;/span&gt;, &lt;span style=&quot;color:#6a3e3e;&quot;&gt;recommendations&lt;/span&gt;.size(), &lt;span style=&quot;color:#6a3e3e;&quot;&gt;productId&lt;/span&gt;);&lt;/p&gt;&lt;p style=&quot;margin:0;&quot;&gt;&#x9;&#x9;&#x9;&lt;span style=&quot;color:#7f0055;font-weight:bold;&quot;&gt;return&lt;/span&gt; &lt;span style=&quot;color:#6a3e3e;&quot;&gt;recommendations&lt;/span&gt;;&lt;/p&gt;&lt;p style=&quot;margin:0;&quot;&gt;&#x9;&#x9;} &lt;span style=&quot;color:#7f0055;font-weight:bold;&quot;&gt;catch&lt;/span&gt; (Exception &lt;span style=&quot;color:#6a3e3e;&quot;&gt;ex&lt;/span&gt;) {&lt;/p&gt;&lt;p style=&quot;margin:0;&quot;&gt;&#x9;&#x9;&#x9;&lt;span style=&quot;color:#0000c0;&quot;&gt;LOG&lt;/span&gt;.warn(&lt;span style=&quot;color:#2a00ff;&quot;&gt;&quot;Got an exception while requesting recommendations, return zero recommendations: {}&quot;&lt;/span&gt;, &lt;span style=&quot;color:#6a3e3e;&quot;&gt;ex&lt;/span&gt;.getMessage());&lt;/p&gt;&lt;p style=&quot;margin:0;&quot;&gt;&#x9;&#x9;&#x9;&lt;span style=&quot;color:#7f0055;font-weight:bold;&quot;&gt;return&lt;/span&gt; &lt;span style=&quot;color:#7f0055;font-weight:bold;&quot;&gt;new&lt;/span&gt; ArrayList&amp;lt;&amp;gt;();&lt;/p&gt;&lt;p style=&quot;margin:0;&quot;&gt;&#x9;&#x9;}&lt;/p&gt;&lt;p style=&quot;margin:0;&quot;&gt;&#x9;}&lt;/p&gt;&lt;p style=&quot;margin:0;&quot;&gt;&#x9;&lt;/p&gt;&lt;p style=&quot;margin:0;&quot;&gt;&#x9;&lt;span style=&quot;color:#646464;&quot;&gt;@Override&lt;/span&gt;&lt;/p&gt;&lt;p style=&quot;margin:0;&quot;&gt;&#x9;&lt;span style=&quot;color:#7f0055;font-weight:bold;&quot;&gt;public&lt;/span&gt; List&amp;lt;Review&amp;gt; getReviews(&lt;span style=&quot;color:#7f0055;font-weight:bold;&quot;&gt;int&lt;/span&gt; &lt;span style=&quot;color:#6a3e3e;&quot;&gt;productId&lt;/span&gt;) {&lt;/p&gt;&lt;p style=&quot;margin:0;&quot;&gt;&#x9;&#x9;&lt;/p&gt;&lt;p style=&quot;margin:0;&quot;&gt;&#x9;&#x9;&lt;span style=&quot;color:#7f0055;font-weight:bold;&quot;&gt;try&lt;/span&gt; {&lt;/p&gt;&lt;p style=&quot;margin:0;&quot;&gt;&#x9;&#x9;&#x9;String &lt;span style=&quot;color:#6a3e3e;&quot;&gt;url&lt;/span&gt; = &lt;span style=&quot;color:#0000c0;&quot;&gt;reviewServiceUrl&lt;/span&gt; + &lt;span style=&quot;color:#6a3e3e;&quot;&gt;productId&lt;/span&gt;;&lt;/p&gt;&lt;p style=&quot;margin:0;&quot;&gt;&#x9;&#x9;&#x9;&lt;/p&gt;&lt;p style=&quot;margin:0;&quot;&gt;&#x9;&#x9;&#x9;&lt;span style=&quot;color:#0000c0;&quot;&gt;LOG&lt;/span&gt;.debug(&lt;span style=&quot;color:#2a00ff;&quot;&gt;&quot;Will call getReviews API on URL: {}&quot;&lt;/span&gt;, &lt;span style=&quot;color:#6a3e3e;&quot;&gt;url&lt;/span&gt;);&lt;/p&gt;&lt;p style=&quot;margin:0;&quot;&gt;&#x9;&#x9;&#x9;List&amp;lt;Review&amp;gt; &lt;span style=&quot;color:#6a3e3e;&quot;&gt;reviews&lt;/span&gt; = &lt;span style=&quot;color:#0000c0;&quot;&gt;restTemplate&lt;/span&gt;.exchange(&lt;span style=&quot;color:#6a3e3e;&quot;&gt;url&lt;/span&gt;, &lt;span style=&quot;color:#0000c0;font-style:italic;font-weight:bold;&quot;&gt;GET&lt;/span&gt;, &lt;span style=&quot;color:#7f0055;font-weight:bold;&quot;&gt;null&lt;/span&gt;, &lt;span style=&quot;color:#7f0055;font-weight:bold;&quot;&gt;new&lt;/span&gt; ParameterizedTypeReference&amp;lt;List&amp;lt;Review&amp;gt;&amp;gt;() {}).getBody();&lt;/p&gt;&lt;p style=&quot;margin:0;&quot;&gt;&#x9;&#x9;&#x9;&lt;/p&gt;&lt;p style=&quot;margin:0;&quot;&gt;&#x9;&#x9;&#x9;&lt;span style=&quot;color:#0000c0;&quot;&gt;LOG&lt;/span&gt;.debug(&lt;span style=&quot;color:#2a00ff;&quot;&gt;&quot;Found {} reviews for a product with id: {}&quot;&lt;/span&gt;, &lt;span style=&quot;color:#6a3e3e;&quot;&gt;reviews&lt;/span&gt;.size(), &lt;span style=&quot;color:#6a3e3e;&quot;&gt;productId&lt;/span&gt;);&lt;/p&gt;&lt;p style=&quot;margin:0;&quot;&gt;&#x9;&#x9;&#x9;&lt;/p&gt;&lt;p style=&quot;margin:0;&quot;&gt;&#x9;&#x9;&#x9;&lt;span style=&quot;color:#7f0055;font-weight:bold;&quot;&gt;return&lt;/span&gt; &lt;span style=&quot;color:#6a3e3e;&quot;&gt;reviews&lt;/span&gt;;&lt;/p&gt;&lt;p style=&quot;margin:0;&quot;&gt;&#x9;&#x9;} &lt;span style=&quot;color:#7f0055;font-weight:bold;&quot;&gt;catch&lt;/span&gt; (Exception &lt;span style=&quot;color:#6a3e3e;&quot;&gt;ex&lt;/span&gt;) {&lt;/p&gt;&lt;p style=&quot;margin:0;&quot;&gt;&#x9;&#x9;&#x9;&lt;span style=&quot;color:#0000c0;&quot;&gt;LOG&lt;/span&gt;.warn(&lt;span style=&quot;color:#2a00ff;&quot;&gt;&quot;Got an exception while requesting reviews, return zero reviews: {}&quot;&lt;/span&gt;, &lt;span style=&quot;color:#6a3e3e;&quot;&gt;ex&lt;/span&gt;.getMessage());&lt;/p&gt;&lt;p style=&quot;margin:0;&quot;&gt;&#x9;&#x9;&#x9;&lt;span style=&quot;color:#7f0055;font-weight:bold;&quot;&gt;return&lt;/span&gt; &lt;span style=&quot;color:#7f0055;font-weight:bold;&quot;&gt;new&lt;/span&gt; ArrayList&amp;lt;&amp;gt;();&lt;/p&gt;&lt;p style=&quot;margin:0;&quot;&gt;&#x9;&#x9;}&lt;/p&gt;&lt;p style=&quot;margin:0;&quot;&gt;&#x9;}&lt;/p&gt;&lt;p style=&quot;margin:0;&quot;&gt;&#x9;&lt;/p&gt;&lt;p style=&quot;margin:0;&quot;&gt;&#x9;&lt;span style=&quot;color:#7f0055;font-weight:bold;&quot;&gt;private&lt;/span&gt; String getErrorMessage(HttpClientErrorException &lt;span style=&quot;color:#6a3e3e;&quot;&gt;ex&lt;/span&gt;) {&lt;/p&gt;&lt;p style=&quot;margin:0;&quot;&gt;&#x9;&#x9;&lt;span style=&quot;color:#7f0055;font-weight:bold;&quot;&gt;try&lt;/span&gt; {&lt;/p&gt;&lt;p style=&quot;margin:0;&quot;&gt;&#x9;&#x9;&#x9;&lt;span style=&quot;color:#7f0055;font-weight:bold;&quot;&gt;return&lt;/span&gt; &lt;span style=&quot;color:#0000c0;&quot;&gt;mapper&lt;/span&gt;.readValue(&lt;span style=&quot;color:#6a3e3e;&quot;&gt;ex&lt;/span&gt;.getResponseBodyAsString(), HttpErrorInfo.&lt;span style=&quot;color:#7f0055;font-weight:bold;&quot;&gt;class&lt;/span&gt;).getMessage();&lt;/p&gt;&lt;p style=&quot;margin:0;&quot;&gt;&#x9;&#x9;} &lt;span style=&quot;color:#7f0055;font-weight:bold;&quot;&gt;catch&lt;/span&gt; (IOException &lt;span style=&quot;color:#6a3e3e;&quot;&gt;ioex&lt;/span&gt;) {&lt;/p&gt;&lt;p style=&quot;margin:0;&quot;&gt;&#x9;&#x9;&#x9;&lt;span style=&quot;color:#7f0055;font-weight:bold;&quot;&gt;return&lt;/span&gt; &lt;span style=&quot;color:#6a3e3e;&quot;&gt;ex&lt;/span&gt;.getMessage();&lt;/p&gt;&lt;p style=&quot;margin:0;&quot;&gt;&#x9;&#x9;}&lt;/p&gt;&lt;p style=&quot;margin:0;&quot;&gt;&#x9;}&lt;/p&gt;&lt;p style=&quot;margin:0;&quot;&gt;&lt;br&gt;&lt;/p&gt;&lt;p style=&quot;margin:0;&quot;&gt;&#x9;&lt;span style=&quot;color:#646464;&quot;&gt;@Override&lt;/span&gt;&lt;/p&gt;&lt;p style=&quot;margin:0;&quot;&gt;&#x9;&lt;span style=&quot;color:#7f0055;font-weight:bold;&quot;&gt;public&lt;/span&gt; Review createReview(Review &lt;span style=&quot;color:#6a3e3e;&quot;&gt;body&lt;/span&gt;) {&lt;/p&gt;&lt;p style=&quot;margin:0;&quot;&gt;&#x9;&#x9;&lt;/p&gt;&lt;p style=&quot;margin:0;&quot;&gt;&#x9;&#x9;&lt;span style=&quot;color:#7f0055;font-weight:bold;&quot;&gt;try&lt;/span&gt; {&lt;/p&gt;&lt;p style=&quot;margin:0;&quot;&gt;&#x9;&#x9;&#x9;String &lt;span style=&quot;color:#6a3e3e;&quot;&gt;url&lt;/span&gt; = &lt;span style=&quot;color:#0000c0;&quot;&gt;reviewServiceUrl&lt;/span&gt;;&lt;/p&gt;&lt;p style=&quot;margin:0;&quot;&gt;&#x9;&#x9;&#x9;&lt;span style=&quot;color:#0000c0;&quot;&gt;LOG&lt;/span&gt;.debug(&lt;span style=&quot;color:#2a00ff;&quot;&gt;&quot;Will post a new review to URL: {}&quot;&lt;/span&gt;, &lt;span style=&quot;color:#6a3e3e;&quot;&gt;url&lt;/span&gt;);&lt;/p&gt;&lt;p style=&quot;margin:0;&quot;&gt;&#x9;&#x9;&#x9;&lt;/p&gt;&lt;p style=&quot;margin:0;&quot;&gt;&#x9;&#x9;&#x9;Review &lt;span style=&quot;color:#6a3e3e;&quot;&gt;review&lt;/span&gt; = &lt;span style=&quot;color:#0000c0;&quot;&gt;restTemplate&lt;/span&gt;.postForObject(&lt;span style=&quot;color:#6a3e3e;&quot;&gt;url&lt;/span&gt;, &lt;span style=&quot;color:#6a3e3e;&quot;&gt;body&lt;/span&gt;, Review.&lt;span style=&quot;color:#7f0055;font-weight:bold;&quot;&gt;class&lt;/span&gt;);&lt;/p&gt;&lt;p style=&quot;margin:0;&quot;&gt;&#x9;&#x9;&#x9;&lt;span style=&quot;color:#0000c0;&quot;&gt;LOG&lt;/span&gt;.debug(&lt;span style=&quot;color:#2a00ff;&quot;&gt;&quot;Created a review with id: {}&quot;&lt;/span&gt;, &lt;span style=&quot;color:#6a3e3e;&quot;&gt;review&lt;/span&gt;.getProductId());&lt;/p&gt;&lt;p style=&quot;margin:0;&quot;&gt;&#x9;&#x9;&#x9;&lt;/p&gt;&lt;p style=&quot;margin:0;&quot;&gt;&#x9;&#x9;&#x9;&lt;span style=&quot;color:#7f0055;font-weight:bold;&quot;&gt;return&lt;/span&gt; &lt;span style=&quot;color:#6a3e3e;&quot;&gt;review&lt;/span&gt;;&lt;/p&gt;&lt;p style=&quot;margin:0;&quot;&gt;&#x9;&#x9;} &lt;span style=&quot;color:#7f0055;font-weight:bold;&quot;&gt;catch&lt;/span&gt; (HttpClientErrorException &lt;span style=&quot;color:#6a3e3e;&quot;&gt;ex&lt;/span&gt;) {&lt;/p&gt;&lt;p style=&quot;margin:0;&quot;&gt;&#x9;&#x9;&#x9;&lt;span style=&quot;color:#7f0055;font-weight:bold;&quot;&gt;throw&lt;/span&gt; handleHttpClientException(&lt;span style=&quot;color:#6a3e3e;&quot;&gt;ex&lt;/span&gt;);&lt;/p&gt;&lt;p style=&quot;margin:0;&quot;&gt;&#x9;&#x9;}&lt;/p&gt;&lt;p style=&quot;margin:0;&quot;&gt;&#x9;}&lt;/p&gt;&lt;p style=&quot;margin:0;&quot;&gt;&lt;br&gt;&lt;/p&gt;&lt;p style=&quot;margin:0;&quot;&gt;&#x9;&lt;span style=&quot;color:#646464;&quot;&gt;@Override&lt;/span&gt;&lt;/p&gt;&lt;p style=&quot;margin:0;&quot;&gt;&#x9;&lt;span style=&quot;color:#7f0055;font-weight:bold;&quot;&gt;public&lt;/span&gt; &lt;span style=&quot;color:#7f0055;font-weight:bold;&quot;&gt;void&lt;/span&gt; deleteReviews(&lt;span style=&quot;color:#7f0055;font-weight:bold;&quot;&gt;int&lt;/span&gt; &lt;span style=&quot;color:#6a3e3e;&quot;&gt;productId&lt;/span&gt;) {&lt;/p&gt;&lt;p style=&quot;margin:0;&quot;&gt;&#x9;&#x9;&lt;span style=&quot;color:#7f0055;font-weight:bold;&quot;&gt;try&lt;/span&gt; {&lt;/p&gt;&lt;p style=&quot;margin:0;&quot;&gt;&#x9;&#x9;&#x9;String &lt;span style=&quot;color:#6a3e3e;&quot;&gt;url&lt;/span&gt; = &lt;span style=&quot;color:#0000c0;&quot;&gt;reviewServiceUrl&lt;/span&gt; + &lt;span style=&quot;color:#2a00ff;&quot;&gt;&quot;?productId=&quot;&lt;/span&gt; + &lt;span style=&quot;color:#6a3e3e;&quot;&gt;productId&lt;/span&gt;;&lt;/p&gt;&lt;p style=&quot;margin:0;&quot;&gt;&#x9;&#x9;&#x9;&lt;span style=&quot;color:#0000c0;&quot;&gt;LOG&lt;/span&gt;.debug(&lt;span style=&quot;color:#2a00ff;&quot;&gt;&quot;Will call the deleteReviews API on URL: {}&quot;&lt;/span&gt;, &lt;span style=&quot;color:#6a3e3e;&quot;&gt;url&lt;/span&gt;);&lt;/p&gt;&lt;p style=&quot;margin:0;&quot;&gt;&#x9;&#x9;&#x9;&lt;/p&gt;&lt;p style=&quot;margin:0;&quot;&gt;&#x9;&#x9;&#x9;&lt;span style=&quot;color:#0000c0;&quot;&gt;restTemplate&lt;/span&gt;.delete(&lt;span style=&quot;color:#6a3e3e;&quot;&gt;url&lt;/span&gt;);&lt;/p&gt;&lt;p style=&quot;margin:0;&quot;&gt;&#x9;&#x9;&#x9;&lt;/p&gt;&lt;p style=&quot;margin:0;&quot;&gt;&#x9;&#x9;} &lt;span style=&quot;color:#7f0055;font-weight:bold;&quot;&gt;catch&lt;/span&gt; (HttpClientErrorException &lt;span style=&quot;color:#6a3e3e;&quot;&gt;ex&lt;/span&gt;) {&lt;/p&gt;&lt;p style=&quot;margin:0;&quot;&gt;&#x9;&#x9;&#x9;&lt;span style=&quot;color:#7f0055;font-weight:bold;&quot;&gt;throw&lt;/span&gt; handleHttpClientException(&lt;span style=&quot;color:#6a3e3e;&quot;&gt;ex&lt;/span&gt;);&lt;/p&gt;&lt;p style=&quot;margin:0;&quot;&gt;&#x9;&#x9;}&lt;/p&gt;&lt;p style=&quot;margin:0;&quot;&gt;&#x9;}&lt;/p&gt;&lt;p style=&quot;margin:0;&quot;&gt;&lt;br&gt;&lt;/p&gt;&lt;p style=&quot;margin:0;&quot;&gt;&#x9;&lt;span style=&quot;color:#7f0055;font-weight:bold;&quot;&gt;private&lt;/span&gt; RuntimeException handleHttpClientException(HttpClientErrorException &lt;span style=&quot;color:#6a3e3e;&quot;&gt;ex&lt;/span&gt;) {&lt;/p&gt;&lt;p style=&quot;margin:0;&quot;&gt;&#x9;&#x9;&lt;span style=&quot;color:#7f0055;font-weight:bold;&quot;&gt;switch&lt;/span&gt;(HttpStatus.&lt;span style=&quot;font-style: italic;&quot;&gt;resolve&lt;/span&gt;(&lt;span style=&quot;color:#6a3e3e;&quot;&gt;ex&lt;/span&gt;.getStatusCode().value())) {&lt;/p&gt;&lt;p style=&quot;margin:0;&quot;&gt;&#x9;&#x9;&lt;span style=&quot;color:#7f0055;font-weight:bold;&quot;&gt;case&lt;/span&gt; &lt;span style=&quot;color:#0000c0;font-style:italic;font-weight:bold;&quot;&gt;NOT_FOUND&lt;/span&gt;:&lt;/p&gt;&lt;p style=&quot;margin:0;&quot;&gt;&#x9;&#x9;&#x9;&lt;span style=&quot;color:#7f0055;font-weight:bold;&quot;&gt;return&lt;/span&gt; &lt;span style=&quot;color:#7f0055;font-weight:bold;&quot;&gt;new&lt;/span&gt; NotFoundException(getErrorMessage(&lt;span style=&quot;color:#6a3e3e;&quot;&gt;ex&lt;/span&gt;));&lt;/p&gt;&lt;p style=&quot;margin:0;&quot;&gt;&#x9;&#x9;&#x9;&lt;/p&gt;&lt;p style=&quot;margin:0;&quot;&gt;&#x9;&#x9;&lt;span style=&quot;color:#7f0055;font-weight:bold;&quot;&gt;case&lt;/span&gt; &lt;span style=&quot;color:#0000c0;font-style:italic;font-weight:bold;&quot;&gt;UNPROCESSABLE_ENTITY&lt;/span&gt;:&lt;/p&gt;&lt;p style=&quot;margin:0;&quot;&gt;&#x9;&#x9;&#x9;&lt;span style=&quot;color:#7f0055;font-weight:bold;&quot;&gt;return&lt;/span&gt; &lt;span style=&quot;color:#7f0055;font-weight:bold;&quot;&gt;new&lt;/span&gt; InvalidInputException(getErrorMessage(&lt;span style=&quot;color:#6a3e3e;&quot;&gt;ex&lt;/span&gt;));&lt;/p&gt;&lt;p style=&quot;margin:0;&quot;&gt;&#x9;&#x9;&#x9;&lt;/p&gt;&lt;p style=&quot;margin:0;&quot;&gt;&#x9;&#x9;&lt;span style=&quot;color:#7f0055;font-weight:bold;&quot;&gt;default&lt;/span&gt;:&lt;/p&gt;&lt;p style=&quot;margin:0;&quot;&gt;&#x9;&#x9;&#x9;&lt;span style=&quot;color:#0000c0;&quot;&gt;LOG&lt;/span&gt;.warn(&lt;span style=&quot;color:#2a00ff;&quot;&gt;&quot;Got an unexpected HTTP error: {}, will rethrow it&quot;&lt;/span&gt;, &lt;span style=&quot;color:#6a3e3e;&quot;&gt;ex&lt;/span&gt;.getStatusCode());&lt;/p&gt;&lt;p style=&quot;margin:0;&quot;&gt;&#x9;&#x9;&#x9;&lt;span style=&quot;color:#0000c0;&quot;&gt;LOG&lt;/span&gt;.warn(&lt;span style=&quot;color:#2a00ff;&quot;&gt;&quot;Error body: {}&quot;&lt;/span&gt;, &lt;span style=&quot;color:#6a3e3e;&quot;&gt;ex&lt;/span&gt;.getResponseBodyAsString());&lt;/p&gt;&lt;p style=&quot;margin:0;&quot;&gt;&#x9;&#x9;&#x9;&lt;span style=&quot;color:#7f0055;font-weight:bold;&quot;&gt;return&lt;/span&gt; &lt;span style=&quot;color:#6a3e3e;&quot;&gt;ex&lt;/span&gt;;&lt;/p&gt;&lt;p style=&quot;margin:0;&quot;&gt;&#x9;&#x9;}&lt;/p&gt;&lt;p style=&quot;margin:0;&quot;&gt;&#x9;}&lt;/p&gt;&lt;p style=&quot;margin:0;&quot;&gt;&lt;br&gt;&lt;/p&gt;&lt;p style=&quot;margin:0;&quot;&gt;&#x9;&lt;span style=&quot;color:#646464;&quot;&gt;@Override&lt;/span&gt;&lt;/p&gt;&lt;p style=&quot;margin:0;&quot;&gt;&#x9;&lt;span style=&quot;color:#7f0055;font-weight:bold;&quot;&gt;public&lt;/span&gt; Recommendation createRecommendation(Recommendation &lt;span style=&quot;color:#6a3e3e;&quot;&gt;body&lt;/span&gt;) {&lt;/p&gt;&lt;p style=&quot;margin:0;&quot;&gt;&#x9;&#x9;&lt;/p&gt;&lt;p style=&quot;margin:0;&quot;&gt;&#x9;&#x9;&lt;span style=&quot;color:#7f0055;font-weight:bold;&quot;&gt;try&lt;/span&gt; {&lt;/p&gt;&lt;p style=&quot;margin:0;&quot;&gt;&#x9;&#x9;&#x9;String &lt;span style=&quot;color:#6a3e3e;&quot;&gt;url&lt;/span&gt; = &lt;span style=&quot;color:#0000c0;&quot;&gt;recommendationServiceUrl&lt;/span&gt;;&lt;/p&gt;&lt;p style=&quot;margin:0;&quot;&gt;&#x9;&#x9;&#x9;&lt;span style=&quot;color:#0000c0;&quot;&gt;LOG&lt;/span&gt;.debug(&lt;span style=&quot;color:#2a00ff;&quot;&gt;&quot;Will post a new recommendation to URL: {}&quot;&lt;/span&gt;, &lt;span style=&quot;color:#6a3e3e;&quot;&gt;url&lt;/span&gt;);&lt;/p&gt;&lt;p style=&quot;margin:0;&quot;&gt;&#x9;&#x9;&#x9;&lt;/p&gt;&lt;p style=&quot;margin:0;&quot;&gt;&#x9;&#x9;&#x9;Recommendation &lt;span style=&quot;color:#6a3e3e;&quot;&gt;rec&lt;/span&gt; = &lt;span style=&quot;color:#0000c0;&quot;&gt;restTemplate&lt;/span&gt;.postForObject(&lt;span style=&quot;color:#6a3e3e;&quot;&gt;url&lt;/span&gt;, &lt;span style=&quot;color:#6a3e3e;&quot;&gt;body&lt;/span&gt;, Recommendation.&lt;span style=&quot;color:#7f0055;font-weight:bold;&quot;&gt;class&lt;/span&gt;);&lt;/p&gt;&lt;p style=&quot;margin:0;&quot;&gt;&#x9;&#x9;&#x9;&lt;span style=&quot;color:#0000c0;&quot;&gt;LOG&lt;/span&gt;.debug(&lt;span style=&quot;color:#2a00ff;&quot;&gt;&quot;Created a recommendation with id: {}&quot;&lt;/span&gt;, &lt;span style=&quot;color:#6a3e3e;&quot;&gt;rec&lt;/span&gt;.getProductId());&lt;/p&gt;&lt;p style=&quot;margin:0;&quot;&gt;&#x9;&#x9;&#x9;&lt;/p&gt;&lt;p style=&quot;margin:0;&quot;&gt;&#x9;&#x9;&#x9;&lt;span style=&quot;color:#7f0055;font-weight:bold;&quot;&gt;return&lt;/span&gt; &lt;span style=&quot;color:#6a3e3e;&quot;&gt;rec&lt;/span&gt;;&lt;/p&gt;&lt;p style=&quot;margin:0;&quot;&gt;&#x9;&#x9;} &lt;span style=&quot;color:#7f0055;font-weight:bold;&quot;&gt;catch&lt;/span&gt; (HttpClientErrorException &lt;span style=&quot;color:#6a3e3e;&quot;&gt;ex&lt;/span&gt;) {&lt;/p&gt;&lt;p style=&quot;margin:0;&quot;&gt;&#x9;&#x9;&#x9;&lt;span style=&quot;color:#7f0055;font-weight:bold;&quot;&gt;throw&lt;/span&gt; handleHttpClientException(&lt;span style=&quot;color:#6a3e3e;&quot;&gt;ex&lt;/span&gt;);&lt;/p&gt;&lt;p style=&quot;margin:0;&quot;&gt;&#x9;&#x9;}&lt;/p&gt;&lt;p style=&quot;margin:0;&quot;&gt;&#x9;}&lt;/p&gt;&lt;p style=&quot;margin:0;&quot;&gt;&lt;br&gt;&lt;/p&gt;&lt;p style=&quot;margin:0;&quot;&gt;&#x9;&lt;span style=&quot;color:#646464;&quot;&gt;@Override&lt;/span&gt;&lt;/p&gt;&lt;p style=&quot;margin:0;&quot;&gt;&#x9;&lt;span style=&quot;color:#7f0055;font-weight:bold;&quot;&gt;public&lt;/span&gt; &lt;span style=&quot;color:#7f0055;font-weight:bold;&quot;&gt;void&lt;/span&gt; deleteRecommendations(&lt;span style=&quot;color:#7f0055;font-weight:bold;&quot;&gt;int&lt;/span&gt; &lt;span style=&quot;color:#6a3e3e;&quot;&gt;productId&lt;/span&gt;) {&lt;/p&gt;&lt;p style=&quot;margin:0;&quot;&gt;&#x9;&#x9;&lt;span style=&quot;color:#7f0055;font-weight:bold;&quot;&gt;try&lt;/span&gt; {&lt;/p&gt;&lt;p style=&quot;margin:0;&quot;&gt;&#x9;&#x9;&#x9;String &lt;span style=&quot;color:#6a3e3e;&quot;&gt;url&lt;/span&gt; = &lt;span style=&quot;color:#0000c0;&quot;&gt;recommendationServiceUrl&lt;/span&gt; + &lt;span style=&quot;color:#2a00ff;&quot;&gt;&quot;?productId=&quot;&lt;/span&gt; + &lt;span style=&quot;color:#6a3e3e;&quot;&gt;productId&lt;/span&gt;;&lt;/p&gt;&lt;p style=&quot;margin:0;&quot;&gt;&#x9;&#x9;&#x9;&lt;span style=&quot;color:#0000c0;&quot;&gt;LOG&lt;/span&gt;.debug(&lt;span style=&quot;color:#2a00ff;&quot;&gt;&quot;Will call deleteRecommendations API on URL: {}&quot;&lt;/span&gt;, &lt;span style=&quot;color:#6a3e3e;&quot;&gt;url&lt;/span&gt;);&lt;/p&gt;&lt;p style=&quot;margin:0;&quot;&gt;&#x9;&#x9;&#x9;&lt;/p&gt;&lt;p style=&quot;margin:0;&quot;&gt;&#x9;&#x9;&#x9;&lt;span style=&quot;color:#0000c0;&quot;&gt;restTemplate&lt;/span&gt;.delete(&lt;span style=&quot;color:#6a3e3e;&quot;&gt;url&lt;/span&gt;);&lt;/p&gt;&lt;p style=&quot;margin:0;&quot;&gt;&#x9;&#x9;} &lt;span style=&quot;color:#7f0055;font-weight:bold;&quot;&gt;catch&lt;/span&gt; (HttpClientErrorException &lt;span style=&quot;color:#6a3e3e;&quot;&gt;ex&lt;/span&gt;) {&lt;/p&gt;&lt;p style=&quot;margin:0;&quot;&gt;&#x9;&#x9;&#x9;&lt;span style=&quot;color:#7f0055;font-weight:bold;&quot;&gt;throw&lt;/span&gt; handleHttpClientException(&lt;span style=&quot;color:#6a3e3e;&quot;&gt;ex&lt;/span&gt;);&lt;/p&gt;&lt;p style=&quot;margin:0;&quot;&gt;&#x9;&#x9;}&lt;/p&gt;&lt;p style=&quot;margin:0;&quot;&gt;&#x9;}&lt;/p&gt;&lt;p style=&quot;margin:0;&quot;&gt;&lt;br&gt;&lt;/p&gt;&lt;p style=&quot;margin:0;&quot;&gt;}&lt;/p&gt;&lt;p style=&quot;margin:0;&quot;&gt;&lt;/p&gt;&lt;/div&gt;&lt;/div&gt;" style="text;html=1;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;" vertex="1" parent="1">
          <mxGeometry x="1507" y="1172" width="1380" height="3850" as="geometry" />
        </mxCell>
        <mxCell id="ASkFnVq22RRDwnPk15t2-22" value="" style="endArrow=none;html=1;rounded=1;movable=1;resizable=1;rotatable=1;deletable=1;editable=1;locked=0;connectable=1;strokeColor=#000099;curved=0;strokeWidth=3;jumpStyle=gap;" edge="1" parent="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="560" y="1590" as="sourcePoint" />
            <mxPoint x="1490" y="1670" as="targetPoint" />
            <Array as="points">
              <mxPoint x="1330" y="1590" />
              <mxPoint x="1330" y="1670" />
            </Array>
          </mxGeometry>
        </mxCell>
      </root>
    </mxGraphModel>
  </diagram>
</mxfile>
